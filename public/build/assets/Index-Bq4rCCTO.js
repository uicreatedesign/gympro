import{c as Ge,j as t,u as at,t as Le,r as _e,a as pt,b as tt,H as ft}from"./app-ClaVGjBP.js";import{a as xt,P as st,b as ut,c as jt,S as yt,d as _t,e as gt,f as bt,g as vt}from"./pagination-ExJRwd0e.js";import{A as St}from"./app-layout-dVj7ocz8.js";import{b as Ue,c as Xe,C as Je,a as Ke}from"./card-BdZxGVLC.js";import{c as de,S as he,a as pe,b as fe,d as o}from"./select-DQiR8PDV.js";import{I as He}from"./input-DDWbr8FH.js";import{B as xe}from"./app-logo-icon-D6_3138E.js";import{B as Nt}from"./badge-BscihO-O.js";import{c as Ct,T as dt,b as je,a as ye,P as wt,e as Pt,d as Dt}from"./table-9xX2di4n.js";import{D as kt}from"./download-tQhwH17V.js";import{T as Tt}from"./trash-2-FWdnKU59.js";import{D as nt,a as it,b as rt,c as ct,d as ot,e as mt}from"./dialog-CIkpK-0_.js";import{L as W}from"./label-9LQ9-oiz.js";import{T as ht}from"./textarea-BnZULEx9.js";import{D as lt}from"./dollar-sign-CjddlFed.js";import{P as Ft}from"./plus-BKmqMPX_.js";import{C as Et}from"./circle-check-big-BWpdritA.js";import{C as It}from"./circle-x-293fFvI4.js";import{X as Mt}from"./app-logo-CC9xdQ8h.js";/* empty css            */import"./chevron-left-D--uPVVk.js";import"./app-sidebar-layout-CqBnhpq2.js";import"./index--EjGmPax.js";import"./index-DmDrrsyR.js";import"./index-Cx2XN_pX.js";import"./index-D7zDqw9m.js";import"./chevron-down--D_ZmB0j.js";import"./check-mvJ0vL-R.js";function At(A){const e=Ge.c(10),{payments:l,onEdit:i,onDelete:a}=A,f=Ot;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(Ct,{children:t.jsxs(dt,{children:[t.jsx(je,{className:"w-16",children:"Sr No"}),t.jsx(je,{children:"Invoice #"}),t.jsx(je,{children:"Member"}),t.jsx(je,{children:"Amount"}),t.jsx(je,{children:"Method"}),t.jsx(je,{children:"Date"}),t.jsx(je,{children:"Status"}),t.jsx(je,{className:"text-right",children:"Actions"})]})}),e[0]=n):n=e[0];let s;if(e[1]!==a||e[2]!==i||e[3]!==l){let u;e[5]!==a||e[6]!==i?(u=(m,p)=>t.jsxs(dt,{className:"hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[t.jsx(ye,{children:p+1}),t.jsx(ye,{className:"font-medium",children:m.invoice_number}),t.jsx(ye,{children:m.member?.user?.name}),t.jsxs(ye,{children:["₹",m.amount]}),t.jsx(ye,{className:"capitalize",children:m.payment_method}),t.jsx(ye,{children:new Date(m.payment_date).toLocaleDateString()}),t.jsx(ye,{children:t.jsx(Nt,{variant:"outline",className:m.status==="completed"?"border-green-200 text-green-700 bg-green-50 dark:border-green-800 dark:text-green-400 dark:bg-green-950":m.status==="pending"?"border-yellow-200 text-yellow-700 bg-yellow-50 dark:border-yellow-800 dark:text-yellow-400 dark:bg-yellow-950":m.status==="failed"?"border-red-200 text-red-700 bg-red-50 dark:border-red-800 dark:text-red-400 dark:bg-red-950":"border-gray-200 text-gray-700 bg-gray-50 dark:border-gray-800 dark:text-gray-400 dark:bg-gray-950",children:m.status})}),t.jsx(ye,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(xe,{variant:"outline",size:"sm",onClick:()=>f(m),children:t.jsx(kt,{className:"h-4 w-4"})}),i&&t.jsx(xe,{variant:"outline",size:"sm",onClick:()=>i(m),children:t.jsx(wt,{className:"h-4 w-4"})}),a&&t.jsx(xe,{variant:"outline",size:"sm",onClick:()=>a(m),children:t.jsx(Tt,{className:"h-4 w-4"})})]})})]},m.id),e[5]=a,e[6]=i,e[7]=u):u=e[7],s=l.map(u),e[1]=a,e[2]=i,e[3]=l,e[4]=s}else s=e[4];let c;return e[8]!==s?(c=t.jsxs(Pt,{children:[n,t.jsx(Dt,{children:s})]}),e[8]=s,e[9]=c):c=e[9],c}function Ot(A){window.open(`/payments/${A.id}/invoice`,"_blank")}function Vt(A){const e=Ge.c(94),{open:l,onOpenChange:i,subscriptions:a}=A;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=new Date().toISOString().split("T"),e[0]=f):f=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={subscription_id:"",amount:"",payment_method:"cash",payment_type:"plan",payment_date:f[0],status:"completed",notes:""},e[1]=n):n=e[1];const{data:s,setData:c,post:u,processing:m,errors:p,reset:S}=at(n);let d;e[2]!==i||e[3]!==u||e[4]!==S?(d=h=>{h.preventDefault(),u("/payments",{onSuccess:()=>{i(!1),S(),Le.success("Payment recorded successfully")},onError:Rt})},e[2]=i,e[3]=u,e[4]=S,e[5]=d):d=e[5];const N=d;let r;e[6]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsxs(nt,{children:[t.jsx(it,{children:"Record Payment"}),t.jsx(rt,{children:"Record a manual payment for a subscription"})]}),e[6]=r):r=e[6];let ae;e[7]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(W,{htmlFor:"subscription_id",children:"Subscription *"}),e[7]=ae):ae=e[7];let C;e[8]!==c?(C=h=>c("subscription_id",h),e[8]=c,e[9]=C):C=e[9];let re;e[10]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(he,{children:t.jsx(pe,{placeholder:"Select subscription"})}),e[10]=re):re=e[10];let O;e[11]!==a?(O=a?.map($t),e[11]=a,e[12]=O):O=e[12];let w;e[13]!==O?(w=t.jsx(fe,{children:O}),e[13]=O,e[14]=w):w=e[14];let P;e[15]!==s.subscription_id||e[16]!==C||e[17]!==w?(P=t.jsxs(de,{value:s.subscription_id,onValueChange:C,children:[re,w]}),e[15]=s.subscription_id,e[16]=C,e[17]=w,e[18]=P):P=e[18];let V;e[19]!==p.subscription_id?(V=p.subscription_id&&t.jsx("p",{className:"text-sm text-destructive",children:p.subscription_id}),e[19]=p.subscription_id,e[20]=V):V=e[20];let Y;e[21]!==P||e[22]!==V?(Y=t.jsxs("div",{className:"space-y-2 col-span-2",children:[ae,P,V]}),e[21]=P,e[22]=V,e[23]=Y):Y=e[23];let $;e[24]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(W,{htmlFor:"amount",children:"Amount *"}),e[24]=$):$=e[24];let R;e[25]!==c?(R=h=>c("amount",h.target.value),e[25]=c,e[26]=R):R=e[26];let B;e[27]!==s.amount||e[28]!==R?(B=t.jsx(He,{id:"amount",type:"number",step:"0.01",value:s.amount,onChange:R,placeholder:"0.00"}),e[27]=s.amount,e[28]=R,e[29]=B):B=e[29];let Z;e[30]!==p.amount?(Z=p.amount&&t.jsx("p",{className:"text-sm text-destructive",children:p.amount}),e[30]=p.amount,e[31]=Z):Z=e[31];let H;e[32]!==B||e[33]!==Z?(H=t.jsxs("div",{className:"space-y-2",children:[$,B,Z]}),e[32]=B,e[33]=Z,e[34]=H):H=e[34];let j;e[35]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(W,{htmlFor:"payment_date",children:"Payment Date *"}),e[35]=j):j=e[35];let D;e[36]!==c?(D=h=>c("payment_date",h.target.value),e[36]=c,e[37]=D):D=e[37];let ee;e[38]!==s.payment_date||e[39]!==D?(ee=t.jsxs("div",{className:"space-y-2",children:[j,t.jsx(He,{id:"payment_date",type:"date",value:s.payment_date,onChange:D})]}),e[38]=s.payment_date,e[39]=D,e[40]=ee):ee=e[40];let te;e[41]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(W,{htmlFor:"payment_method",children:"Payment Method *"}),e[41]=te):te=e[41];let se;e[42]!==c?(se=h=>c("payment_method",h),e[42]=c,e[43]=se):se=e[43];let ne;e[44]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(he,{children:t.jsx(pe,{})}),e[44]=ne):ne=e[44];let le;e[45]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs(fe,{children:[t.jsx(o,{value:"cash",children:"Cash"}),t.jsx(o,{value:"card",children:"Card"}),t.jsx(o,{value:"upi",children:"UPI"}),t.jsx(o,{value:"bank_transfer",children:"Bank Transfer"})]}),e[45]=le):le=e[45];let L;e[46]!==s.payment_method||e[47]!==se?(L=t.jsxs("div",{className:"space-y-2",children:[te,t.jsxs(de,{value:s.payment_method,onValueChange:se,children:[ne,le]})]}),e[46]=s.payment_method,e[47]=se,e[48]=L):L=e[48];let z;e[49]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(W,{htmlFor:"payment_type",children:"Payment Type *"}),e[49]=z):z=e[49];let k;e[50]!==c?(k=h=>c("payment_type",h),e[50]=c,e[51]=k):k=e[51];let U;e[52]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(he,{children:t.jsx(pe,{})}),e[52]=U):U=e[52];let X;e[53]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsxs(fe,{children:[t.jsx(o,{value:"plan",children:"Plan Fee"}),t.jsx(o,{value:"admission",children:"Admission Fee"}),t.jsx(o,{value:"renewal",children:"Renewal"})]}),e[53]=X):X=e[53];let T;e[54]!==s.payment_type||e[55]!==k?(T=t.jsxs("div",{className:"space-y-2",children:[z,t.jsxs(de,{value:s.payment_type,onValueChange:k,children:[U,X]})]}),e[54]=s.payment_type,e[55]=k,e[56]=T):T=e[56];let G;e[57]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(W,{htmlFor:"status",children:"Status *"}),e[57]=G):G=e[57];let _;e[58]!==c?(_=h=>c("status",h),e[58]=c,e[59]=_):_=e[59];let ie;e[60]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(he,{children:t.jsx(pe,{})}),e[60]=ie):ie=e[60];let F;e[61]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsxs(fe,{children:[t.jsx(o,{value:"completed",children:"Completed"}),t.jsx(o,{value:"pending",children:"Pending"}),t.jsx(o,{value:"failed",children:"Failed"})]}),e[61]=F):F=e[61];let q;e[62]!==s.status||e[63]!==_?(q=t.jsxs("div",{className:"space-y-2",children:[G,t.jsxs(de,{value:s.status,onValueChange:_,children:[ie,F]})]}),e[62]=s.status,e[63]=_,e[64]=q):q=e[64];let J;e[65]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(W,{htmlFor:"notes",children:"Notes"}),e[65]=J):J=e[65];let g;e[66]!==c?(g=h=>c("notes",h.target.value),e[66]=c,e[67]=g):g=e[67];let E;e[68]!==s.notes||e[69]!==g?(E=t.jsxs("div",{className:"space-y-2 col-span-2",children:[J,t.jsx(ht,{id:"notes",value:s.notes,onChange:g,placeholder:"Optional notes..."})]}),e[68]=s.notes,e[69]=g,e[70]=E):E=e[70];let I;e[71]!==Y||e[72]!==H||e[73]!==ee||e[74]!==L||e[75]!==T||e[76]!==q||e[77]!==E?(I=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[Y,H,ee,L,T,q,E]}),e[71]=Y,e[72]=H,e[73]=ee,e[74]=L,e[75]=T,e[76]=q,e[77]=E,e[78]=I):I=e[78];let b;e[79]!==i?(b=t.jsx(xe,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[79]=i,e[80]=b):b=e[80];let K;e[81]!==m?(K=t.jsx(xe,{type:"submit",disabled:m,children:"Record Payment"}),e[81]=m,e[82]=K):K=e[82];let M;e[83]!==b||e[84]!==K?(M=t.jsxs(ct,{children:[b,K]}),e[83]=b,e[84]=K,e[85]=M):M=e[85];let v;e[86]!==N||e[87]!==I||e[88]!==M?(v=t.jsxs(ot,{className:"max-w-2xl",children:[r,t.jsxs("form",{onSubmit:N,children:[I,M]})]}),e[86]=N,e[87]=I,e[88]=M,e[89]=v):v=e[89];let Q;return e[90]!==i||e[91]!==l||e[92]!==v?(Q=t.jsx(mt,{open:l,onOpenChange:i,children:v}),e[90]=i,e[91]=l,e[92]=v,e[93]=Q):Q=e[93],Q}function $t(A){return t.jsxs(o,{value:A.id.toString(),children:[A.member?.name," - ",A.plan?.name]},A.id)}function Rt(){Le.error("Failed to record payment")}function Bt(A){const e=Ge.c(105),{open:l,onOpenChange:i,payment:a}=A;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={member_id:"none",subscription_id:"none",amount:"",payment_method:"cash",payment_type:"subscription",payment_date:new Date().toISOString().split("T")[0],status:"completed",notes:"",transaction_id:""},e[0]=f):f=e[0];const{data:n,setData:s,put:c,processing:u}=at(f);let m;e[1]!==l||e[2]!==a||e[3]!==s?(m=()=>{a&&l&&s({member_id:a.member_id?.toString()||"none",subscription_id:a.subscription_id?.toString()||"none",amount:a.amount||"",payment_method:a.payment_method||"cash",payment_type:a.payment_type||"subscription",payment_date:a.payment_date?a.payment_date.split("T")[0]:new Date().toISOString().split("T")[0],status:a.status||"completed",notes:a.notes||"",transaction_id:a.transaction_id||""})},e[1]=l,e[2]=a,e[3]=s,e[4]=m):m=e[4];let p;e[5]!==l||e[6]!==a?(p=[a,l],e[5]=l,e[6]=a,e[7]=p):p=e[7],_e.useEffect(m,p);let S;e[8]!==i||e[9]!==a.id||e[10]!==c?(S=x=>{x.preventDefault(),c(`/payments/${a.id}`,{onSuccess:()=>{i(!1),Le.success("Payment updated successfully")},onError:Ht})},e[8]=i,e[9]=a.id,e[10]=c,e[11]=S):S=e[11];const d=S;let N;e[12]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsxs(nt,{children:[t.jsx(it,{children:"Edit Payment"}),t.jsx(rt,{children:"Update payment information"})]}),e[12]=N):N=e[12];let r;e[13]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(W,{htmlFor:"member_id",children:"Member"}),e[13]=r):r=e[13];let ae;e[14]!==s?(ae=x=>s("member_id",x),e[14]=s,e[15]=ae):ae=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(he,{children:t.jsx(pe,{})}),e[16]=C):C=e[16];const re=n.member_id==="none"?"none":n.member_id,O=a.member?.name||"Select Member";let w;e[17]!==O||e[18]!==re?(w=t.jsx(fe,{children:t.jsx(o,{value:re,children:O})}),e[17]=O,e[18]=re,e[19]=w):w=e[19];let P;e[20]!==n.member_id||e[21]!==w||e[22]!==ae?(P=t.jsxs("div",{className:"space-y-2",children:[r,t.jsxs(de,{value:n.member_id,onValueChange:ae,children:[C,w]})]}),e[20]=n.member_id,e[21]=w,e[22]=ae,e[23]=P):P=e[23];let V;e[24]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(W,{htmlFor:"subscription_id",children:"Subscription (Optional)"}),e[24]=V):V=e[24];const Y=n.subscription_id||"none";let $;e[25]!==s?($=x=>s("subscription_id",x==="none"?"":x),e[25]=s,e[26]=$):$=e[26];let R;e[27]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(he,{children:t.jsx(pe,{})}),e[27]=R):R=e[27];let B;e[28]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(fe,{children:t.jsx(o,{value:"none",children:"None"})}),e[28]=B):B=e[28];let Z;e[29]!==Y||e[30]!==$?(Z=t.jsxs("div",{className:"space-y-2",children:[V,t.jsxs(de,{value:Y,onValueChange:$,children:[R,B]})]}),e[29]=Y,e[30]=$,e[31]=Z):Z=e[31];let H;e[32]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(W,{htmlFor:"amount",children:"Amount"}),e[32]=H):H=e[32];let j;e[33]!==s?(j=x=>s("amount",x.target.value),e[33]=s,e[34]=j):j=e[34];let D;e[35]!==n.amount||e[36]!==j?(D=t.jsxs("div",{className:"space-y-2",children:[H,t.jsx(He,{id:"amount",type:"number",value:n.amount,onChange:j})]}),e[35]=n.amount,e[36]=j,e[37]=D):D=e[37];let ee;e[38]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(W,{htmlFor:"payment_method",children:"Payment Method"}),e[38]=ee):ee=e[38];let te;e[39]!==s?(te=x=>s("payment_method",x),e[39]=s,e[40]=te):te=e[40];let se;e[41]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(he,{children:t.jsx(pe,{placeholder:"Select payment method"})}),e[41]=se):se=e[41];let ne;e[42]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs(fe,{children:[t.jsx(o,{value:"cash",children:"Cash"}),t.jsx(o,{value:"card",children:"Card"}),t.jsx(o,{value:"upi",children:"UPI"}),t.jsx(o,{value:"bank_transfer",children:"Bank Transfer"}),t.jsx(o,{value:"phonepe",children:"PhonePe"})]}),e[42]=ne):ne=e[42];let le;e[43]!==n.payment_method||e[44]!==te?(le=t.jsxs("div",{className:"space-y-2",children:[ee,t.jsxs(de,{value:n.payment_method,onValueChange:te,children:[se,ne]})]}),e[43]=n.payment_method,e[44]=te,e[45]=le):le=e[45];let L;e[46]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(W,{htmlFor:"payment_type",children:"Payment Type"}),e[46]=L):L=e[46];let z;e[47]!==s?(z=x=>s("payment_type",x),e[47]=s,e[48]=z):z=e[48];let k;e[49]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(he,{children:t.jsx(pe,{placeholder:"Select payment type"})}),e[49]=k):k=e[49];let U;e[50]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs(fe,{children:[t.jsx(o,{value:"plan",children:"Plan"}),t.jsx(o,{value:"admission",children:"Admission"}),t.jsx(o,{value:"renewal",children:"Renewal"})]}),e[50]=U):U=e[50];let X;e[51]!==n.payment_type||e[52]!==z?(X=t.jsxs("div",{className:"space-y-2",children:[L,t.jsxs(de,{value:n.payment_type,onValueChange:z,children:[k,U]})]}),e[51]=n.payment_type,e[52]=z,e[53]=X):X=e[53];let T;e[54]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(W,{htmlFor:"payment_date",children:"Payment Date"}),e[54]=T):T=e[54];let G;e[55]!==s?(G=x=>s("payment_date",x.target.value),e[55]=s,e[56]=G):G=e[56];let _;e[57]!==n.payment_date||e[58]!==G?(_=t.jsxs("div",{className:"space-y-2",children:[T,t.jsx(He,{id:"payment_date",type:"date",value:n.payment_date,onChange:G})]}),e[57]=n.payment_date,e[58]=G,e[59]=_):_=e[59];let ie;e[60]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(W,{htmlFor:"status",children:"Status"}),e[60]=ie):ie=e[60];let F;e[61]!==s?(F=x=>s("status",x),e[61]=s,e[62]=F):F=e[62];let q;e[63]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(he,{children:t.jsx(pe,{})}),e[63]=q):q=e[63];let J;e[64]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsxs(fe,{children:[t.jsx(o,{value:"completed",children:"Completed"}),t.jsx(o,{value:"pending",children:"Pending"}),t.jsx(o,{value:"failed",children:"Failed"}),t.jsx(o,{value:"refunded",children:"Refunded"})]}),e[64]=J):J=e[64];let g;e[65]!==n.status||e[66]!==F?(g=t.jsxs("div",{className:"space-y-2",children:[ie,t.jsxs(de,{value:n.status,onValueChange:F,children:[q,J]})]}),e[65]=n.status,e[66]=F,e[67]=g):g=e[67];let E;e[68]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(W,{htmlFor:"transaction_id",children:"Transaction ID"}),e[68]=E):E=e[68];let I;e[69]!==s?(I=x=>s("transaction_id",x.target.value),e[69]=s,e[70]=I):I=e[70];let b;e[71]!==n.transaction_id||e[72]!==I?(b=t.jsxs("div",{className:"space-y-2",children:[E,t.jsx(He,{id:"transaction_id",value:n.transaction_id,onChange:I})]}),e[71]=n.transaction_id,e[72]=I,e[73]=b):b=e[73];let K;e[74]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(W,{htmlFor:"notes",children:"Notes"}),e[74]=K):K=e[74];let M;e[75]!==s?(M=x=>s("notes",x.target.value),e[75]=s,e[76]=M):M=e[76];let v;e[77]!==n.notes||e[78]!==M?(v=t.jsxs("div",{className:"space-y-2 col-span-2",children:[K,t.jsx(ht,{id:"notes",value:n.notes,onChange:M})]}),e[77]=n.notes,e[78]=M,e[79]=v):v=e[79];let Q;e[80]!==P||e[81]!==Z||e[82]!==D||e[83]!==le||e[84]!==X||e[85]!==_||e[86]!==g||e[87]!==b||e[88]!==v?(Q=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[P,Z,D,le,X,_,g,b,v]}),e[80]=P,e[81]=Z,e[82]=D,e[83]=le,e[84]=X,e[85]=_,e[86]=g,e[87]=b,e[88]=v,e[89]=Q):Q=e[89];let h;e[90]!==i?(h=t.jsx(xe,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[90]=i,e[91]=h):h=e[91];let oe;e[92]!==u?(oe=t.jsx(xe,{type:"submit",disabled:u,children:"Update"}),e[92]=u,e[93]=oe):oe=e[93];let me;e[94]!==h||e[95]!==oe?(me=t.jsxs(ct,{children:[h,oe]}),e[94]=h,e[95]=oe,e[96]=me):me=e[96];let ce;e[97]!==d||e[98]!==Q||e[99]!==me?(ce=t.jsxs(ot,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[N,t.jsxs("form",{onSubmit:d,children:[Q,me]})]}),e[97]=d,e[98]=Q,e[99]=me,e[100]=ce):ce=e[100];let ue;return e[101]!==i||e[102]!==l||e[103]!==ce?(ue=t.jsx(mt,{open:l,onOpenChange:i,children:ce}),e[101]=i,e[102]=l,e[103]=ce,e[104]=ue):ue=e[104],ue}function Ht(){Le.error("Failed to update payment")}function Lt(A){const e=Ge.c(22),{open:l,onOpenChange:i,payment:a}=A,{delete:f,processing:n}=at();let s;e[0]!==f||e[1]!==i||e[2]!==a.id?(s=()=>{f(`/payments/${a.id}`,{onSuccess:()=>{i(!1),Le.success("Payment deleted successfully")},onError:zt})},e[0]=f,e[1]=i,e[2]=a.id,e[3]=s):s=e[3];const c=s;let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(it,{children:"Delete Payment"}),e[4]=u):u=e[4];let m;e[5]!==a.invoice_number?(m=t.jsxs(nt,{children:[u,t.jsxs(rt,{children:['Are you sure you want to delete payment "',a.invoice_number,'"? This action cannot be undone.']})]}),e[5]=a.invoice_number,e[6]=m):m=e[6];let p;e[7]!==i?(p=t.jsx(xe,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[7]=i,e[8]=p):p=e[8];let S;e[9]!==c||e[10]!==n?(S=t.jsx(xe,{variant:"destructive",onClick:c,disabled:n,children:"Delete"}),e[9]=c,e[10]=n,e[11]=S):S=e[11];let d;e[12]!==p||e[13]!==S?(d=t.jsxs(ct,{children:[p,S]}),e[12]=p,e[13]=S,e[14]=d):d=e[14];let N;e[15]!==m||e[16]!==d?(N=t.jsxs(ot,{children:[m,d]}),e[15]=m,e[16]=d,e[17]=N):N=e[17];let r;return e[18]!==i||e[19]!==l||e[20]!==N?(r=t.jsx(mt,{open:l,onOpenChange:i,children:N}),e[18]=i,e[19]=l,e[20]=N,e[21]=r):r=e[21],r}function zt(){Le.error("Failed to delete payment")}function _s(A){const e=Ge.c(138),{payments:l,subscriptions:i,stats:a,filters:f}=A,{auth:n}=pt().props,[s,c]=_e.useState(!1),[u,m]=_e.useState(null),[p,S]=_e.useState(null),[d,N]=_e.useState(f.search||""),[r,ae]=_e.useState(f.status||"all"),[C]=xt(d,500);let re;e[0]!==n.permissions?(re=n.permissions.includes("create_payments"),e[0]=n.permissions,e[1]=re):re=e[1];const O=re;let w;e[2]!==n.permissions?(w=n.permissions.includes("edit_payments"),e[2]=n.permissions,e[3]=w):w=e[3];const P=w;let V;e[4]!==n.permissions?(V=n.permissions.includes("delete_payments"),e[4]=n.permissions,e[5]=V):V=e[5];const Y=V;let $;e[6]!==C||e[7]!==f.per_page||e[8]!==r?($=()=>{tt.get("/payments",{search:C||void 0,status:r!=="all"?r:void 0,per_page:f.per_page},{preserveState:!0,preserveScroll:!0})},e[6]=C,e[7]=f.per_page,e[8]=r,e[9]=$):$=e[9];let R;e[10]!==C||e[11]!==r?(R=[C,r],e[10]=C,e[11]=r,e[12]=R):R=e[12],_e.useEffect($,R);let B;e[13]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{N(""),ae("all")},e[13]=B):B=e[13];const Z=B;let H;e[14]!==f.per_page||e[15]!==d||e[16]!==r?(H=y=>{tt.get("/payments",{page:y,search:d||void 0,status:r!=="all"?r:void 0,per_page:f.per_page},{preserveState:!0})},e[14]=f.per_page,e[15]=d,e[16]=r,e[17]=H):H=e[17];const j=H;let D;e[18]!==d||e[19]!==r?(D=y=>{tt.get("/payments",{search:d||void 0,status:r!=="all"?r:void 0,per_page:y},{preserveState:!0})},e[18]=d,e[19]=r,e[20]=D):D=e[20];const ee=D,te=(l.current_page-1)*l.per_page+1,se=Math.min(l.current_page*l.per_page,l.total);let ne;e[21]!==l?(ne=()=>{const y=[],{current_page:Be,last_page:ze}=l;if(ze<=7)return Array.from({length:ze},Ut);y.push(1),Be>3&&y.push("...");for(let et=Math.max(2,Be-1);et<=Math.min(ze-1,Be+1);et++)y.push(et);return Be<ze-2&&y.push("..."),y.push(ze),y},e[21]=l,e[22]=ne):ne=e[22];const le=ne;let L;e[23]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(ft,{title:"Payments"}),e[23]=L):L=e[23];let z;e[24]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Payments"}),t.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Manage payment records"})]}),e[24]=z):z=e[24];let k;e[25]!==O?(k=O&&t.jsxs(xe,{onClick:()=>c(!0),className:"w-full md:w-auto",children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Record Payment"]}),e[25]=O,e[26]=k):k=e[26];let U;e[27]!==k?(U=t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[z,k]}),e[27]=k,e[28]=U):U=e[28];let X;e[29]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsxs(Je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(Ke,{className:"text-sm font-medium",children:"Total Payments"}),t.jsx(lt,{className:"h-4 w-4 text-muted-foreground"})]}),e[29]=X):X=e[29];let T;e[30]!==a.total?(T=t.jsxs(Ue,{children:[X,t.jsx(Xe,{children:t.jsx("div",{className:"text-2xl font-bold",children:a.total})})]}),e[30]=a.total,e[31]=T):T=e[31];let G;e[32]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs(Je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(Ke,{className:"text-sm font-medium",children:"Completed"}),t.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),e[32]=G):G=e[32];let _;e[33]!==a.completed?(_=t.jsxs(Ue,{children:[G,t.jsx(Xe,{children:t.jsx("div",{className:"text-2xl font-bold",children:a.completed})})]}),e[33]=a.completed,e[34]=_):_=e[34];let ie;e[35]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs(Je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(Ke,{className:"text-sm font-medium",children:"Pending"}),t.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e[35]=ie):ie=e[35];let F;e[36]!==a.pending?(F=t.jsxs(Ue,{children:[ie,t.jsx(Xe,{children:t.jsx("div",{className:"text-2xl font-bold",children:a.pending})})]}),e[36]=a.pending,e[37]=F):F=e[37];let q;e[38]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsxs(Je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(Ke,{className:"text-sm font-medium",children:"Total Amount"}),t.jsx(lt,{className:"h-4 w-4 text-muted-foreground"})]}),e[38]=q):q=e[38];let J;e[39]!==a.total_amount?(J=a.total_amount.toLocaleString(),e[39]=a.total_amount,e[40]=J):J=e[40];let g;e[41]!==J?(g=t.jsxs(Ue,{children:[q,t.jsx(Xe,{children:t.jsxs("div",{className:"text-2xl font-bold",children:["₹",J]})})]}),e[41]=J,e[42]=g):g=e[42];let E;e[43]!==T||e[44]!==_||e[45]!==F||e[46]!==g?(E=t.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[T,_,F,g]}),e[43]=T,e[44]=_,e[45]=F,e[46]=g,e[47]=E):E=e[47];let I;e[48]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Show"}),e[48]=I):I=e[48];let b;e[49]!==f.per_page?(b=f.per_page.toString(),e[49]=f.per_page,e[50]=b):b=e[50];let K;e[51]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(he,{className:"w-20",children:t.jsx(pe,{})}),e[51]=K):K=e[51];let M;e[52]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs(fe,{children:[t.jsx(o,{value:"10",children:"10"}),t.jsx(o,{value:"25",children:"25"}),t.jsx(o,{value:"50",children:"50"}),t.jsx(o,{value:"100",children:"100"})]}),e[52]=M):M=e[52];let v;e[53]!==ee||e[54]!==b?(v=t.jsxs(de,{value:b,onValueChange:ee,children:[K,M]}),e[53]=ee,e[54]=b,e[55]=v):v=e[55];let Q;e[56]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"entries"}),e[56]=Q):Q=e[56];let h;e[57]!==v?(h=t.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[I,v,Q]})}),e[57]=v,e[58]=h):h=e[58];let oe;e[59]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(yt,{className:"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[59]=oe):oe=e[59];let me;e[60]===Symbol.for("react.memo_cache_sentinel")?(me=y=>N(y.target.value),e[60]=me):me=e[60];let ce;e[61]!==d?(ce=t.jsxs("div",{className:"relative flex-1",children:[oe,t.jsx(He,{placeholder:"Search payments...",value:d,onChange:me,className:"pl-8 h-9"})]}),e[61]=d,e[62]=ce):ce=e[62];let ue;e[63]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(he,{className:"w-full sm:w-40 h-9",children:t.jsx(pe,{placeholder:"Status"})}),e[63]=ue):ue=e[63];let x;e[64]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs(fe,{children:[t.jsx(o,{value:"all",children:"All Status"}),t.jsx(o,{value:"completed",children:"Completed"}),t.jsx(o,{value:"pending",children:"Pending"}),t.jsx(o,{value:"failed",children:"Failed"}),t.jsx(o,{value:"refunded",children:"Refunded"})]}),e[64]=x):x=e[64];let ge;e[65]!==r?(ge=t.jsxs(de,{value:r,onValueChange:ae,children:[ue,x]}),e[65]=r,e[66]=ge):ge=e[66];let be;e[67]!==d||e[68]!==r?(be=(d||r!=="all")&&t.jsx(xe,{variant:"ghost",size:"sm",onClick:Z,className:"w-full sm:w-auto",children:t.jsx(Mt,{className:"h-4 w-4"})}),e[67]=d,e[68]=r,e[69]=be):be=e[69];let ve;e[70]!==ce||e[71]!==ge||e[72]!==be?(ve=t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[ce,ge,be]}),e[70]=ce,e[71]=ge,e[72]=be,e[73]=ve):ve=e[73];let Se;e[74]!==h||e[75]!==ve?(Se=t.jsxs("div",{className:"space-y-4",children:[h,ve]}),e[74]=h,e[75]=ve,e[76]=Se):Se=e[76];const Qe=P?m:void 0,We=Y?S:void 0;let Ne;e[77]!==l.data||e[78]!==Qe||e[79]!==We?(Ne=t.jsx("div",{className:"overflow-x-auto",children:t.jsx(At,{payments:l.data,onEdit:Qe,onDelete:We})}),e[77]=l.data,e[78]=Qe,e[79]=We,e[80]=Ne):Ne=e[80];let Ce;e[81]!==l.data.length||e[82]!==d||e[83]!==r?(Ce=l.data.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(lt,{className:"mx-auto h-12 w-12 text-muted-foreground"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No payments found"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:d||r!=="all"?"Try adjusting your filters":"Get started by recording a new payment"})]}),e[81]=l.data.length,e[82]=d,e[83]=r,e[84]=Ce):Ce=e[84];let we;e[85]!==se||e[86]!==l.total||e[87]!==te?(we=t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",te," to ",se," of ",l.total," results"]}),e[85]=se,e[86]=l.total,e[87]=te,e[88]=we):we=e[88];let Pe;e[89]!==j||e[90]!==l.current_page?(Pe=()=>j(l.current_page-1),e[89]=j,e[90]=l.current_page,e[91]=Pe):Pe=e[91];const Ye=l.current_page===1?"pointer-events-none opacity-50":"cursor-pointer";let De;e[92]!==Pe||e[93]!==Ye?(De=t.jsx(st,{children:t.jsx(_t,{onClick:Pe,className:Ye})}),e[92]=Pe,e[93]=Ye,e[94]=De):De=e[94];let ke;e[95]!==le?(ke=le(),e[95]=le,e[96]=ke):ke=e[96];let Te;e[97]!==j||e[98]!==l.current_page||e[99]!==ke?(Te=ke.map((y,Be)=>t.jsx(st,{children:y==="..."?t.jsx(ut,{}):t.jsx(jt,{onClick:()=>j(y),isActive:y===l.current_page,className:"cursor-pointer",children:y})},Be)),e[97]=j,e[98]=l.current_page,e[99]=ke,e[100]=Te):Te=e[100];let Fe;e[101]!==j||e[102]!==l.current_page?(Fe=()=>j(l.current_page+1),e[101]=j,e[102]=l.current_page,e[103]=Fe):Fe=e[103];const Ze=l.current_page===l.last_page?"pointer-events-none opacity-50":"cursor-pointer";let Ee;e[104]!==Fe||e[105]!==Ze?(Ee=t.jsx(st,{children:t.jsx(gt,{onClick:Fe,className:Ze})}),e[104]=Fe,e[105]=Ze,e[106]=Ee):Ee=e[106];let Ie;e[107]!==De||e[108]!==Te||e[109]!==Ee?(Ie=t.jsx("div",{className:"overflow-x-auto",children:t.jsx(bt,{children:t.jsxs(vt,{children:[De,Te,Ee]})})}),e[107]=De,e[108]=Te,e[109]=Ee,e[110]=Ie):Ie=e[110];let Me;e[111]!==we||e[112]!==Ie?(Me=t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4",children:[we,Ie]}),e[111]=we,e[112]=Ie,e[113]=Me):Me=e[113];let Ae;e[114]!==Se||e[115]!==Ne||e[116]!==Ce||e[117]!==Me?(Ae=t.jsx(Ue,{children:t.jsxs(Xe,{className:"pt-6 space-y-4",children:[Se,Ne,Ce,Me]})}),e[114]=Se,e[115]=Ne,e[116]=Ce,e[117]=Me,e[118]=Ae):Ae=e[118];let Oe;e[119]!==U||e[120]!==E||e[121]!==Ae?(Oe=t.jsxs("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[U,E,Ae]}),e[119]=U,e[120]=E,e[121]=Ae,e[122]=Oe):Oe=e[122];let Ve;e[123]!==O||e[124]!==s||e[125]!==i?(Ve=O&&t.jsx(Vt,{open:s,onOpenChange:c,subscriptions:i||[]}),e[123]=O,e[124]=s,e[125]=i,e[126]=Ve):Ve=e[126];let $e;e[127]!==P||e[128]!==u?($e=P&&u&&t.jsx(Bt,{open:!!u,onOpenChange:y=>!y&&m(null),payment:u}),e[127]=P,e[128]=u,e[129]=$e):$e=e[129];let Re;e[130]!==Y||e[131]!==p?(Re=Y&&p&&t.jsx(Lt,{open:!!p,onOpenChange:y=>!y&&S(null),payment:p}),e[130]=Y,e[131]=p,e[132]=Re):Re=e[132];let qe;return e[133]!==Oe||e[134]!==Ve||e[135]!==$e||e[136]!==Re?(qe=t.jsxs(St,{children:[L,Oe,Ve,$e,Re]}),e[133]=Oe,e[134]=Ve,e[135]=$e,e[136]=Re,e[137]=qe):qe=e[137],qe}function Ut(A,e){return e+1}export{_s as default};
