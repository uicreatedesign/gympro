import{c as Ce,j as t,u as Fe,t as ve,r as ke,a as Ve,H as Re,b as Be}from"./app-BBrHr9yK.js";import{A as He}from"./app-layout-c5UF98Ur.js";import{b as Le,c as ze}from"./card-BVicgB7k.js";import{P as Ue,a as qe,b as De,c as Ge,d as Je,e as Ke,f as Qe}from"./pagination-DD93SJyD.js";import{B as ee}from"./app-logo-icon-XLdLkYsz.js";import{B as We}from"./badge-DdeEsuxv.js";import{c as Xe,T as Ae,b as he,a as pe,P as Ye,e as Ze,d as et}from"./table-U8W7fEAZ.js";import{D as tt}from"./download-FnEIxYEO.js";import{T as st}from"./trash-2-C2MTV1kv.js";import{D as we,a as Te,b as Ee,c as $e,d as Me,e as Oe}from"./dialog-D5s1WcV7.js";import{I as Se}from"./input-B6T46bM3.js";import{L as M}from"./label-CwbEE1ZB.js";import{T as Ie}from"./textarea-BMhKkvmA.js";import{c as oe,S as ce,a as me,b as de,d as h}from"./select-0DzXEy05.js";/* empty css            */import"./app-sidebar-layout-C9WQJ0Fz.js";import"./index-DSdJdJXQ.js";import"./index-C03wu9Ty.js";import"./index-Cx2XN_pX.js";import"./chevron-left-c_ZqhBH6.js";import"./index-CzuNEaHU.js";import"./chevron-down-nWpROBTh.js";import"./check-CsSIm3IP.js";function nt(v){const e=Ce.c(10),{payments:c,onEdit:i,onDelete:s}=v,f=lt;let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(Xe,{children:t.jsxs(Ae,{children:[t.jsx(he,{className:"w-16",children:"Sr No"}),t.jsx(he,{children:"Invoice #"}),t.jsx(he,{children:"Member"}),t.jsx(he,{children:"Amount"}),t.jsx(he,{children:"Method"}),t.jsx(he,{children:"Date"}),t.jsx(he,{children:"Status"}),t.jsx(he,{className:"text-right",children:"Actions"})]})}),e[0]=p):p=e[0];let a;if(e[1]!==s||e[2]!==i||e[3]!==c){let x;e[5]!==s||e[6]!==i?(x=(o,m)=>t.jsxs(Ae,{className:"hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[t.jsx(pe,{children:m+1}),t.jsx(pe,{className:"font-medium",children:o.invoice_number}),t.jsx(pe,{children:o.member?.user?.name}),t.jsxs(pe,{children:["â‚¹",o.amount]}),t.jsx(pe,{className:"capitalize",children:o.payment_method}),t.jsx(pe,{children:new Date(o.payment_date).toLocaleDateString()}),t.jsx(pe,{children:t.jsx(We,{variant:"outline",className:o.status==="completed"?"border-green-200 text-green-700 bg-green-50 dark:border-green-800 dark:text-green-400 dark:bg-green-950":o.status==="pending"?"border-yellow-200 text-yellow-700 bg-yellow-50 dark:border-yellow-800 dark:text-yellow-400 dark:bg-yellow-950":o.status==="failed"?"border-red-200 text-red-700 bg-red-50 dark:border-red-800 dark:text-red-400 dark:bg-red-950":"border-gray-200 text-gray-700 bg-gray-50 dark:border-gray-800 dark:text-gray-400 dark:bg-gray-950",children:o.status})}),t.jsx(pe,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(ee,{variant:"outline",size:"sm",onClick:()=>f(o),children:t.jsx(tt,{className:"h-4 w-4"})}),i&&t.jsx(ee,{variant:"outline",size:"sm",onClick:()=>i(o),children:t.jsx(Ye,{className:"h-4 w-4"})}),s&&t.jsx(ee,{variant:"outline",size:"sm",onClick:()=>s(o),children:t.jsx(st,{className:"h-4 w-4"})})]})})]},o.id),e[5]=s,e[6]=i,e[7]=x):x=e[7],a=c.map(x),e[1]=s,e[2]=i,e[3]=c,e[4]=a}else a=e[4];let r;return e[8]!==a?(r=t.jsxs(Ze,{children:[p,t.jsx(et,{children:a})]}),e[8]=a,e[9]=r):r=e[9],r}function lt(v){window.open(`/payments/${v.id}/invoice`,"_blank")}function at(v){const e=Ce.c(94),{open:c,onOpenChange:i,subscriptions:s}=v;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=new Date().toISOString().split("T"),e[0]=f):f=e[0];let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p={subscription_id:"",amount:"",payment_method:"cash",payment_type:"plan",payment_date:f[0],status:"completed",notes:""},e[1]=p):p=e[1];const{data:a,setData:r,post:x,processing:o,errors:m,reset:_}=Fe(p);let y;e[2]!==i||e[3]!==x||e[4]!==_?(y=u=>{u.preventDefault(),x("/payments",{onSuccess:()=>{i(!1),_(),ve.success("Payment recorded successfully")},onError:rt})},e[2]=i,e[3]=x,e[4]=_,e[5]=y):y=e[5];const n=y;let l;e[6]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsxs(we,{children:[t.jsx(Te,{children:"Record Payment"}),t.jsx(Ee,{children:"Record a manual payment for a subscription"})]}),e[6]=l):l=e[6];let H;e[7]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(M,{htmlFor:"subscription_id",children:"Subscription *"}),e[7]=H):H=e[7];let R;e[8]!==r?(R=u=>r("subscription_id",u),e[8]=r,e[9]=R):R=e[9];let B;e[10]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(ce,{children:t.jsx(me,{placeholder:"Select subscription"})}),e[10]=B):B=e[10];let O;e[11]!==s?(O=s?.map(it),e[11]=s,e[12]=O):O=e[12];let T;e[13]!==O?(T=t.jsx(de,{children:O}),e[13]=O,e[14]=T):T=e[14];let A;e[15]!==a.subscription_id||e[16]!==R||e[17]!==T?(A=t.jsxs(oe,{value:a.subscription_id,onValueChange:R,children:[B,T]}),e[15]=a.subscription_id,e[16]=R,e[17]=T,e[18]=A):A=e[18];let N;e[19]!==m.subscription_id?(N=m.subscription_id&&t.jsx("p",{className:"text-sm text-destructive",children:m.subscription_id}),e[19]=m.subscription_id,e[20]=N):N=e[20];let P;e[21]!==A||e[22]!==N?(P=t.jsxs("div",{className:"space-y-2 col-span-2",children:[H,A,N]}),e[21]=A,e[22]=N,e[23]=P):P=e[23];let I;e[24]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(M,{htmlFor:"amount",children:"Amount *"}),e[24]=I):I=e[24];let V;e[25]!==r?(V=u=>r("amount",u.target.value),e[25]=r,e[26]=V):V=e[26];let w;e[27]!==a.amount||e[28]!==V?(w=t.jsx(Se,{id:"amount",type:"number",step:"0.01",value:a.amount,onChange:V,placeholder:"0.00"}),e[27]=a.amount,e[28]=V,e[29]=w):w=e[29];let j;e[30]!==m.amount?(j=m.amount&&t.jsx("p",{className:"text-sm text-destructive",children:m.amount}),e[30]=m.amount,e[31]=j):j=e[31];let b;e[32]!==w||e[33]!==j?(b=t.jsxs("div",{className:"space-y-2",children:[I,w,j]}),e[32]=w,e[33]=j,e[34]=b):b=e[34];let E;e[35]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(M,{htmlFor:"payment_date",children:"Payment Date *"}),e[35]=E):E=e[35];let g;e[36]!==r?(g=u=>r("payment_date",u.target.value),e[36]=r,e[37]=g):g=e[37];let k;e[38]!==a.payment_date||e[39]!==g?(k=t.jsxs("div",{className:"space-y-2",children:[E,t.jsx(Se,{id:"payment_date",type:"date",value:a.payment_date,onChange:g})]}),e[38]=a.payment_date,e[39]=g,e[40]=k):k=e[40];let $;e[41]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(M,{htmlFor:"payment_method",children:"Payment Method *"}),e[41]=$):$=e[41];let D;e[42]!==r?(D=u=>r("payment_method",u),e[42]=r,e[43]=D):D=e[43];let d;e[44]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(ce,{children:t.jsx(me,{})}),e[44]=d):d=e[44];let F;e[45]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsxs(de,{children:[t.jsx(h,{value:"cash",children:"Cash"}),t.jsx(h,{value:"card",children:"Card"}),t.jsx(h,{value:"upi",children:"UPI"}),t.jsx(h,{value:"bank_transfer",children:"Bank Transfer"})]}),e[45]=F):F=e[45];let S;e[46]!==a.payment_method||e[47]!==D?(S=t.jsxs("div",{className:"space-y-2",children:[$,t.jsxs(oe,{value:a.payment_method,onValueChange:D,children:[d,F]})]}),e[46]=a.payment_method,e[47]=D,e[48]=S):S=e[48];let L;e[49]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(M,{htmlFor:"payment_type",children:"Payment Type *"}),e[49]=L):L=e[49];let z;e[50]!==r?(z=u=>r("payment_type",u),e[50]=r,e[51]=z):z=e[51];let te;e[52]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(ce,{children:t.jsx(me,{})}),e[52]=te):te=e[52];let se;e[53]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs(de,{children:[t.jsx(h,{value:"plan",children:"Plan Fee"}),t.jsx(h,{value:"admission",children:"Admission Fee"}),t.jsx(h,{value:"renewal",children:"Renewal"})]}),e[53]=se):se=e[53];let U;e[54]!==a.payment_type||e[55]!==z?(U=t.jsxs("div",{className:"space-y-2",children:[L,t.jsxs(oe,{value:a.payment_type,onValueChange:z,children:[te,se]})]}),e[54]=a.payment_type,e[55]=z,e[56]=U):U=e[56];let ne;e[57]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(M,{htmlFor:"status",children:"Status *"}),e[57]=ne):ne=e[57];let q;e[58]!==r?(q=u=>r("status",u),e[58]=r,e[59]=q):q=e[59];let le;e[60]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(ce,{children:t.jsx(me,{})}),e[60]=le):le=e[60];let ae;e[61]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(de,{children:[t.jsx(h,{value:"completed",children:"Completed"}),t.jsx(h,{value:"pending",children:"Pending"}),t.jsx(h,{value:"failed",children:"Failed"})]}),e[61]=ae):ae=e[61];let G;e[62]!==a.status||e[63]!==q?(G=t.jsxs("div",{className:"space-y-2",children:[ne,t.jsxs(oe,{value:a.status,onValueChange:q,children:[le,ae]})]}),e[62]=a.status,e[63]=q,e[64]=G):G=e[64];let ie;e[65]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(M,{htmlFor:"notes",children:"Notes"}),e[65]=ie):ie=e[65];let J;e[66]!==r?(J=u=>r("notes",u.target.value),e[66]=r,e[67]=J):J=e[67];let K;e[68]!==a.notes||e[69]!==J?(K=t.jsxs("div",{className:"space-y-2 col-span-2",children:[ie,t.jsx(Ie,{id:"notes",value:a.notes,onChange:J,placeholder:"Optional notes..."})]}),e[68]=a.notes,e[69]=J,e[70]=K):K=e[70];let X;e[71]!==P||e[72]!==b||e[73]!==k||e[74]!==S||e[75]!==U||e[76]!==G||e[77]!==K?(X=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[P,b,k,S,U,G,K]}),e[71]=P,e[72]=b,e[73]=k,e[74]=S,e[75]=U,e[76]=G,e[77]=K,e[78]=X):X=e[78];let Q;e[79]!==i?(Q=t.jsx(ee,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[79]=i,e[80]=Q):Q=e[80];let Y;e[81]!==o?(Y=t.jsx(ee,{type:"submit",disabled:o,children:"Record Payment"}),e[81]=o,e[82]=Y):Y=e[82];let Z;e[83]!==Q||e[84]!==Y?(Z=t.jsxs($e,{children:[Q,Y]}),e[83]=Q,e[84]=Y,e[85]=Z):Z=e[85];let W;e[86]!==n||e[87]!==X||e[88]!==Z?(W=t.jsxs(Me,{className:"max-w-2xl",children:[l,t.jsxs("form",{onSubmit:n,children:[X,Z]})]}),e[86]=n,e[87]=X,e[88]=Z,e[89]=W):W=e[89];let re;return e[90]!==i||e[91]!==c||e[92]!==W?(re=t.jsx(Oe,{open:c,onOpenChange:i,children:W}),e[90]=i,e[91]=c,e[92]=W,e[93]=re):re=e[93],re}function it(v){return t.jsxs(h,{value:v.id.toString(),children:[v.member?.name," - ",v.plan?.name]},v.id)}function rt(){ve.error("Failed to record payment")}function ot(v){const e=Ce.c(126),{open:c,onOpenChange:i,payment:s}=v;let f;e[0]!==s.member_id?(f=s.member_id.toString(),e[0]=s.member_id,e[1]=f):f=e[1];let p;e[2]!==s.subscription_id?(p=s.subscription_id?.toString()||"",e[2]=s.subscription_id,e[3]=p):p=e[3];const a=s.amount,r=s.payment_method,x=s.payment_type;let o;e[4]!==s.payment_date?(o=s.payment_date.split("T"),e[4]=s.payment_date,e[5]=o):o=e[5];const m=s.notes||"",_=s.transaction_id||"";let y;e[6]!==s.amount||e[7]!==s.payment_method||e[8]!==s.payment_type||e[9]!==s.status||e[10]!==f||e[11]!==p||e[12]!==o[0]||e[13]!==m||e[14]!==_?(y={member_id:f,subscription_id:p,amount:a,payment_method:r,payment_type:x,payment_date:o[0],status:s.status,notes:m,transaction_id:_},e[6]=s.amount,e[7]=s.payment_method,e[8]=s.payment_type,e[9]=s.status,e[10]=f,e[11]=p,e[12]=o[0],e[13]=m,e[14]=_,e[15]=y):y=e[15];const{data:n,setData:l,put:H,processing:R}=Fe(y);let B;e[16]!==s.amount||e[17]!==s.member_id||e[18]!==s.notes||e[19]!==s.payment_date||e[20]!==s.payment_method||e[21]!==s.payment_type||e[22]!==s.status||e[23]!==s.subscription_id||e[24]!==s.transaction_id||e[25]!==l?(B=()=>{l({member_id:s.member_id.toString(),subscription_id:s.subscription_id?.toString()||"",amount:s.amount,payment_method:s.payment_method,payment_type:s.payment_type,payment_date:s.payment_date.split("T")[0],status:s.status,notes:s.notes||"",transaction_id:s.transaction_id||""})},e[16]=s.amount,e[17]=s.member_id,e[18]=s.notes,e[19]=s.payment_date,e[20]=s.payment_method,e[21]=s.payment_type,e[22]=s.status,e[23]=s.subscription_id,e[24]=s.transaction_id,e[25]=l,e[26]=B):B=e[26];let O;e[27]!==s?(O=[s],e[27]=s,e[28]=O):O=e[28],ke.useEffect(B,O);let T;e[29]!==i||e[30]!==s.id||e[31]!==H?(T=C=>{C.preventDefault(),H(`/payments/${s.id}`,{onSuccess:()=>{i(!1),ve.success("Payment updated successfully")},onError:ct})},e[29]=i,e[30]=s.id,e[31]=H,e[32]=T):T=e[32];const A=T;let N;e[33]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsxs(we,{children:[t.jsx(Te,{children:"Edit Payment"}),t.jsx(Ee,{children:"Update payment information"})]}),e[33]=N):N=e[33];let P;e[34]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(M,{htmlFor:"member_id",children:"Member"}),e[34]=P):P=e[34];let I;e[35]!==l?(I=C=>l("member_id",C),e[35]=l,e[36]=I):I=e[36];let V;e[37]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(ce,{children:t.jsx(me,{})}),e[37]=V):V=e[37];const w=s.member?.name;let j;e[38]!==n.member_id||e[39]!==w?(j=t.jsx(de,{children:t.jsx(h,{value:n.member_id,children:w})}),e[38]=n.member_id,e[39]=w,e[40]=j):j=e[40];let b;e[41]!==n.member_id||e[42]!==I||e[43]!==j?(b=t.jsxs("div",{className:"space-y-2",children:[P,t.jsxs(oe,{value:n.member_id,onValueChange:I,children:[V,j]})]}),e[41]=n.member_id,e[42]=I,e[43]=j,e[44]=b):b=e[44];let E;e[45]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(M,{htmlFor:"subscription_id",children:"Subscription (Optional)"}),e[45]=E):E=e[45];let g;e[46]!==l?(g=C=>l("subscription_id",C),e[46]=l,e[47]=g):g=e[47];let k;e[48]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(ce,{children:t.jsx(me,{})}),e[48]=k):k=e[48];let $;e[49]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(de,{children:t.jsx(h,{value:"0",children:"None"})}),e[49]=$):$=e[49];let D;e[50]!==n.subscription_id||e[51]!==g?(D=t.jsxs("div",{className:"space-y-2",children:[E,t.jsxs(oe,{value:n.subscription_id,onValueChange:g,children:[k,$]})]}),e[50]=n.subscription_id,e[51]=g,e[52]=D):D=e[52];let d;e[53]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(M,{htmlFor:"amount",children:"Amount"}),e[53]=d):d=e[53];let F;e[54]!==l?(F=C=>l("amount",C.target.value),e[54]=l,e[55]=F):F=e[55];let S;e[56]!==n.amount||e[57]!==F?(S=t.jsxs("div",{className:"space-y-2",children:[d,t.jsx(Se,{id:"amount",type:"number",value:n.amount,onChange:F})]}),e[56]=n.amount,e[57]=F,e[58]=S):S=e[58];let L;e[59]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(M,{htmlFor:"payment_method",children:"Payment Method"}),e[59]=L):L=e[59];let z;e[60]!==l?(z=C=>l("payment_method",C),e[60]=l,e[61]=z):z=e[61];let te;e[62]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(ce,{children:t.jsx(me,{})}),e[62]=te):te=e[62];let se;e[63]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs(de,{children:[t.jsx(h,{value:"cash",children:"Cash"}),t.jsx(h,{value:"card",children:"Card"}),t.jsx(h,{value:"upi",children:"UPI"}),t.jsx(h,{value:"bank_transfer",children:"Bank Transfer"})]}),e[63]=se):se=e[63];let U;e[64]!==n.payment_method||e[65]!==z?(U=t.jsxs("div",{className:"space-y-2",children:[L,t.jsxs(oe,{value:n.payment_method,onValueChange:z,children:[te,se]})]}),e[64]=n.payment_method,e[65]=z,e[66]=U):U=e[66];let ne;e[67]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(M,{htmlFor:"payment_type",children:"Payment Type"}),e[67]=ne):ne=e[67];let q;e[68]!==l?(q=C=>l("payment_type",C),e[68]=l,e[69]=q):q=e[69];let le;e[70]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(ce,{children:t.jsx(me,{})}),e[70]=le):le=e[70];let ae;e[71]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(de,{children:[t.jsx(h,{value:"subscription",children:"Subscription"}),t.jsx(h,{value:"admission",children:"Admission"}),t.jsx(h,{value:"other",children:"Other"})]}),e[71]=ae):ae=e[71];let G;e[72]!==n.payment_type||e[73]!==q?(G=t.jsxs("div",{className:"space-y-2",children:[ne,t.jsxs(oe,{value:n.payment_type,onValueChange:q,children:[le,ae]})]}),e[72]=n.payment_type,e[73]=q,e[74]=G):G=e[74];let ie;e[75]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(M,{htmlFor:"payment_date",children:"Payment Date"}),e[75]=ie):ie=e[75];let J;e[76]!==l?(J=C=>l("payment_date",C.target.value),e[76]=l,e[77]=J):J=e[77];let K;e[78]!==n.payment_date||e[79]!==J?(K=t.jsxs("div",{className:"space-y-2",children:[ie,t.jsx(Se,{id:"payment_date",type:"date",value:n.payment_date,onChange:J})]}),e[78]=n.payment_date,e[79]=J,e[80]=K):K=e[80];let X;e[81]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(M,{htmlFor:"status",children:"Status"}),e[81]=X):X=e[81];let Q;e[82]!==l?(Q=C=>l("status",C),e[82]=l,e[83]=Q):Q=e[83];let Y;e[84]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(ce,{children:t.jsx(me,{})}),e[84]=Y):Y=e[84];let Z;e[85]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsxs(de,{children:[t.jsx(h,{value:"completed",children:"Completed"}),t.jsx(h,{value:"pending",children:"Pending"}),t.jsx(h,{value:"failed",children:"Failed"}),t.jsx(h,{value:"refunded",children:"Refunded"})]}),e[85]=Z):Z=e[85];let W;e[86]!==n.status||e[87]!==Q?(W=t.jsxs("div",{className:"space-y-2",children:[X,t.jsxs(oe,{value:n.status,onValueChange:Q,children:[Y,Z]})]}),e[86]=n.status,e[87]=Q,e[88]=W):W=e[88];let re;e[89]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(M,{htmlFor:"transaction_id",children:"Transaction ID"}),e[89]=re):re=e[89];let u;e[90]!==l?(u=C=>l("transaction_id",C.target.value),e[90]=l,e[91]=u):u=e[91];let ue;e[92]!==n.transaction_id||e[93]!==u?(ue=t.jsxs("div",{className:"space-y-2",children:[re,t.jsx(Se,{id:"transaction_id",value:n.transaction_id,onChange:u})]}),e[92]=n.transaction_id,e[93]=u,e[94]=ue):ue=e[94];let Ne;e[95]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(M,{htmlFor:"notes",children:"Notes"}),e[95]=Ne):Ne=e[95];let fe;e[96]!==l?(fe=C=>l("notes",C.target.value),e[96]=l,e[97]=fe):fe=e[97];let xe;e[98]!==n.notes||e[99]!==fe?(xe=t.jsxs("div",{className:"space-y-2 col-span-2",children:[Ne,t.jsx(Ie,{id:"notes",value:n.notes,onChange:fe})]}),e[98]=n.notes,e[99]=fe,e[100]=xe):xe=e[100];let _e;e[101]!==b||e[102]!==D||e[103]!==S||e[104]!==U||e[105]!==G||e[106]!==K||e[107]!==W||e[108]!==ue||e[109]!==xe?(_e=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[b,D,S,U,G,K,W,ue,xe]}),e[101]=b,e[102]=D,e[103]=S,e[104]=U,e[105]=G,e[106]=K,e[107]=W,e[108]=ue,e[109]=xe,e[110]=_e):_e=e[110];let ye;e[111]!==i?(ye=t.jsx(ee,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[111]=i,e[112]=ye):ye=e[112];let je;e[113]!==R?(je=t.jsx(ee,{type:"submit",disabled:R,children:"Update"}),e[113]=R,e[114]=je):je=e[114];let be;e[115]!==ye||e[116]!==je?(be=t.jsxs($e,{children:[ye,je]}),e[115]=ye,e[116]=je,e[117]=be):be=e[117];let ge;e[118]!==A||e[119]!==_e||e[120]!==be?(ge=t.jsxs(Me,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[N,t.jsxs("form",{onSubmit:A,children:[_e,be]})]}),e[118]=A,e[119]=_e,e[120]=be,e[121]=ge):ge=e[121];let Pe;return e[122]!==i||e[123]!==c||e[124]!==ge?(Pe=t.jsx(Oe,{open:c,onOpenChange:i,children:ge}),e[122]=i,e[123]=c,e[124]=ge,e[125]=Pe):Pe=e[125],Pe}function ct(){ve.error("Failed to update payment")}function mt(v){const e=Ce.c(22),{open:c,onOpenChange:i,payment:s}=v,{delete:f,processing:p}=Fe();let a;e[0]!==f||e[1]!==i||e[2]!==s.id?(a=()=>{f(`/payments/${s.id}`,{onSuccess:()=>{i(!1),ve.success("Payment deleted successfully")},onError:dt})},e[0]=f,e[1]=i,e[2]=s.id,e[3]=a):a=e[3];const r=a;let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(Te,{children:"Delete Payment"}),e[4]=x):x=e[4];let o;e[5]!==s.invoice_number?(o=t.jsxs(we,{children:[x,t.jsxs(Ee,{children:['Are you sure you want to delete payment "',s.invoice_number,'"? This action cannot be undone.']})]}),e[5]=s.invoice_number,e[6]=o):o=e[6];let m;e[7]!==i?(m=t.jsx(ee,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[7]=i,e[8]=m):m=e[8];let _;e[9]!==r||e[10]!==p?(_=t.jsx(ee,{variant:"destructive",onClick:r,disabled:p,children:"Delete"}),e[9]=r,e[10]=p,e[11]=_):_=e[11];let y;e[12]!==m||e[13]!==_?(y=t.jsxs($e,{children:[m,_]}),e[12]=m,e[13]=_,e[14]=y):y=e[14];let n;e[15]!==o||e[16]!==y?(n=t.jsxs(Me,{children:[o,y]}),e[15]=o,e[16]=y,e[17]=n):n=e[17];let l;return e[18]!==i||e[19]!==c||e[20]!==n?(l=t.jsx(Oe,{open:c,onOpenChange:i,children:n}),e[18]=i,e[19]=c,e[20]=n,e[21]=l):l=e[21],l}function dt(){ve.error("Failed to delete payment")}function It(v){const e=Ce.c(43),{payments:c,subscriptions:i}=v,{auth:s}=Ve().props,[f,p]=ke.useState(!1),[a,r]=ke.useState(null),[x,o]=ke.useState(null);let m;e[0]!==s.permissions?(m=s.permissions.includes("create_payments"),e[0]=s.permissions,e[1]=m):m=e[1];const _=m;let y;e[2]!==s.permissions?(y=s.permissions.includes("edit_payments"),e[2]=s.permissions,e[3]=y):y=e[3];const n=y;let l;e[4]!==s.permissions?(l=s.permissions.includes("delete_payments"),e[4]=s.permissions,e[5]=l):l=e[5];const H=l,R=pt;let B;e[6]!==c?(B=()=>{const d=[],{current_page:F,last_page:S}=c;if(S<=7)return Array.from({length:S},ht);d.push(1),F>3&&d.push("...");for(let L=Math.max(2,F-1);L<=Math.min(S-1,F+1);L++)d.push(L);return F<S-2&&d.push("..."),d.push(S),d},e[6]=c,e[7]=B):B=e[7];const O=B;let T;e[8]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(Re,{title:"Payments"}),e[8]=T):T=e[8];let A;e[9]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Payments"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage payment records"})]}),e[9]=A):A=e[9];let N;e[10]!==_?(N=_&&t.jsx(ee,{onClick:()=>p(!0),children:"Record Payment"}),e[10]=_,e[11]=N):N=e[11];let P;e[12]!==N?(P=t.jsxs("div",{className:"flex items-center justify-between",children:[A,N]}),e[12]=N,e[13]=P):P=e[13];const I=n?r:void 0,V=H?o:void 0;let w;e[14]!==c.data||e[15]!==V||e[16]!==I?(w=t.jsx(nt,{payments:c.data,onEdit:I,onDelete:V}),e[14]=c.data,e[15]=V,e[16]=I,e[17]=w):w=e[17];let j;e[18]!==O||e[19]!==c.current_page||e[20]!==c.last_page?(j=c.last_page>1&&t.jsx("div",{className:"p-4",children:t.jsx(Ue,{children:t.jsxs(qe,{children:[t.jsx(De,{children:t.jsx(Ge,{onClick:()=>R(c.current_page-1),className:c.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),O().map((d,F)=>t.jsx(De,{children:d==="..."?t.jsx(Je,{}):t.jsx(Ke,{onClick:()=>R(d),isActive:d===c.current_page,className:"cursor-pointer",children:d})},F)),t.jsx(De,{children:t.jsx(Qe,{onClick:()=>R(c.current_page+1),className:c.current_page===c.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),e[18]=O,e[19]=c.current_page,e[20]=c.last_page,e[21]=j):j=e[21];let b;e[22]!==w||e[23]!==j?(b=t.jsx(Le,{children:t.jsxs(ze,{className:"p-6",children:[w,j]})}),e[22]=w,e[23]=j,e[24]=b):b=e[24];let E;e[25]!==b||e[26]!==P?(E=t.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[P,b]}),e[25]=b,e[26]=P,e[27]=E):E=e[27];let g;e[28]!==_||e[29]!==f||e[30]!==i?(g=_&&t.jsx(at,{open:f,onOpenChange:p,subscriptions:i||[]}),e[28]=_,e[29]=f,e[30]=i,e[31]=g):g=e[31];let k;e[32]!==n||e[33]!==a?(k=n&&a&&t.jsx(ot,{open:!!a,onOpenChange:d=>!d&&r(null),payment:a}),e[32]=n,e[33]=a,e[34]=k):k=e[34];let $;e[35]!==H||e[36]!==x?($=H&&x&&t.jsx(mt,{open:!!x,onOpenChange:d=>!d&&o(null),payment:x}),e[35]=H,e[36]=x,e[37]=$):$=e[37];let D;return e[38]!==E||e[39]!==g||e[40]!==k||e[41]!==$?(D=t.jsxs(He,{children:[T,E,g,k,$]}),e[38]=E,e[39]=g,e[40]=k,e[41]=$,e[42]=D):D=e[42],D}function ht(v,e){return e+1}function pt(v){Be.get("/payments",{page:v},{preserveState:!0})}export{It as default};
