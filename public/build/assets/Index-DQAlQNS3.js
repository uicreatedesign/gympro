import{c as K,j as s,u as X,t as q,r as V,a as re,H as oe}from"./app-BBrHr9yK.js";import{A as ae}from"./app-layout-c5UF98Ur.js";import{B as M}from"./app-logo-icon-XLdLkYsz.js";import{C as ce,a as de,d as me,b as pe,c as fe}from"./card-BVicgB7k.js";import{B as le}from"./badge-DdeEsuxv.js";import{b as G,c as he,T as ie,a as J,P as xe,d as ue,e as je}from"./table-U8W7fEAZ.js";import{T as be}from"./trash-2-C2MTV1kv.js";import{D as Y,a as Z,b as I,c as ee,d as se,e as te}from"./dialog-D5s1WcV7.js";import{I as W}from"./input-B6T46bM3.js";import{L as U}from"./label-CwbEE1ZB.js";import{C as ne}from"./checkbox-CjK_ab4W.js";/* empty css            */import"./app-sidebar-layout-C9WQJ0Fz.js";import"./index-DSdJdJXQ.js";import"./index-C03wu9Ty.js";import"./index-Cx2XN_pX.js";import"./index-CzuNEaHU.js";import"./check-CsSIm3IP.js";function ge(R){const e=K.c(21),{roles:b,onEdit:i,onDelete:t}=R;let f,y,n,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(G,{className:"w-16",children:"Sr No"}),y=s.jsx(G,{children:"Name"}),n=s.jsx(G,{children:"Description"}),o=s.jsx(G,{children:"Permissions"}),e[0]=f,e[1]=y,e[2]=n,e[3]=o):(f=e[0],y=e[1],n=e[2],o=e[3]);let d;e[4]!==t||e[5]!==i?(d=(i||t)&&s.jsx(G,{className:"text-right",children:"Actions"}),e[4]=t,e[5]=i,e[6]=d):d=e[6];let l;e[7]!==d?(l=s.jsx(he,{children:s.jsxs(ie,{children:[f,y,n,o,d]})}),e[7]=d,e[8]=l):l=e[8];let r;if(e[9]!==t||e[10]!==i||e[11]!==b){let p;e[13]!==t||e[14]!==i?(p=(c,D)=>s.jsxs(ie,{className:"hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[s.jsx(J,{children:D+1}),s.jsx(J,{className:"font-medium",children:c.name}),s.jsx(J,{children:c.description||"-"}),s.jsx(J,{children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.permissions.slice(0,3).map(ye),c.permissions.length>3&&s.jsxs(le,{variant:"outline",className:"border-gray-200 text-gray-700 bg-gray-50 dark:border-gray-800 dark:text-gray-400 dark:bg-gray-950",children:["+",c.permissions.length-3," more"]})]})}),(i||t)&&s.jsx(J,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[i&&s.jsx(M,{variant:"outline",size:"sm",onClick:()=>i(c),children:s.jsx(xe,{className:"h-4 w-4"})}),t&&s.jsx(M,{variant:"outline",size:"sm",onClick:()=>t(c),children:s.jsx(be,{className:"h-4 w-4"})})]})})]},c.id),e[13]=t,e[14]=i,e[15]=p):p=e[15],r=b.map(p),e[9]=t,e[10]=i,e[11]=b,e[12]=r}else r=e[12];let a;e[16]!==r?(a=s.jsx(ue,{children:r}),e[16]=r,e[17]=a):a=e[17];let m;return e[18]!==l||e[19]!==a?(m=s.jsxs(je,{children:[l,a]}),e[18]=l,e[19]=a,e[20]=m):m=e[20],m}function ye(R){return s.jsx(le,{variant:"outline",className:"border-blue-200 text-blue-700 bg-blue-50 dark:border-blue-800 dark:text-blue-400 dark:bg-blue-950",children:R.name},R.id)}function ve(R){const e=K.c(56),{open:b,onOpenChange:i,permissions:t}=R;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],e[0]=f):f=e[0];let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={name:"",description:"",permissions:f},e[1]=y):y=e[1];const{data:n,setData:o,post:d,processing:l,errors:r,reset:a}=X(y);let m;e[2]!==i||e[3]!==d||e[4]!==a?(m=h=>{h.preventDefault(),d("/roles",{onSuccess:()=>{a(),i(!1),q.success("Role created successfully")},onError:Ce})},e[2]=i,e[3]=d,e[4]=a,e[5]=m):m=e[5];const p=m;let c;e[6]!==n.permissions||e[7]!==o?(c=h=>{o("permissions",n.permissions.includes(h)?n.permissions.filter(E=>E!==h):[...n.permissions,h])},e[6]=n.permissions,e[7]=o,e[8]=c):c=e[8];const D=c;let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsxs(Y,{children:[s.jsx(Z,{children:"Create Role"}),s.jsx(I,{children:"Create a new role with specific permissions"})]}),e[9]=T):T=e[9];let P;e[10]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(U,{htmlFor:"name",children:"Name"}),e[10]=P):P=e[10];let v;e[11]!==o?(v=h=>o("name",h.target.value),e[11]=o,e[12]=v):v=e[12];let g;e[13]!==n.name||e[14]!==v?(g=s.jsx(W,{id:"name",value:n.name,onChange:v,placeholder:"Role name"}),e[13]=n.name,e[14]=v,e[15]=g):g=e[15];let S;e[16]!==r.name?(S=r.name&&s.jsx("p",{className:"text-sm text-destructive",children:r.name}),e[16]=r.name,e[17]=S):S=e[17];let k;e[18]!==g||e[19]!==S?(k=s.jsxs("div",{className:"space-y-2",children:[P,g,S]}),e[18]=g,e[19]=S,e[20]=k):k=e[20];let w;e[21]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(U,{htmlFor:"description",children:"Description"}),e[21]=w):w=e[21];let x;e[22]!==o?(x=h=>o("description",h.target.value),e[22]=o,e[23]=x):x=e[23];let u;e[24]!==n.description||e[25]!==x?(u=s.jsxs("div",{className:"space-y-2",children:[w,s.jsx(W,{id:"description",value:n.description,onChange:x,placeholder:"Role description"})]}),e[24]=n.description,e[25]=x,e[26]=u):u=e[26];let C;e[27]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(U,{children:"Permissions"}),e[27]=C):C=e[27];let _;if(e[28]!==n.permissions||e[29]!==t||e[30]!==D){let h;e[32]!==n.permissions||e[33]!==D?(h=E=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ne,{id:`permission-${E.id}`,checked:n.permissions.includes(E.id),onCheckedChange:()=>D(E.id)}),s.jsx("label",{htmlFor:`permission-${E.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:E.name})]},E.id),e[32]=n.permissions,e[33]=D,e[34]=h):h=e[34],_=t.map(h),e[28]=n.permissions,e[29]=t,e[30]=D,e[31]=_}else _=e[31];let j;e[35]!==_?(j=s.jsxs("div",{className:"space-y-2",children:[C,s.jsx("div",{className:"grid grid-cols-2 gap-4 border rounded-lg p-4",children:_})]}),e[35]=_,e[36]=j):j=e[36];let N;e[37]!==k||e[38]!==u||e[39]!==j?(N=s.jsxs("div",{className:"space-y-4 py-4",children:[k,u,j]}),e[37]=k,e[38]=u,e[39]=j,e[40]=N):N=e[40];let $;e[41]!==i?($=s.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[41]=i,e[42]=$):$=e[42];let O;e[43]!==l?(O=s.jsx(M,{type:"submit",disabled:l,children:"Create"}),e[43]=l,e[44]=O):O=e[44];let H;e[45]!==$||e[46]!==O?(H=s.jsxs(ee,{children:[$,O]}),e[45]=$,e[46]=O,e[47]=H):H=e[47];let B;e[48]!==p||e[49]!==N||e[50]!==H?(B=s.jsxs(se,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[T,s.jsxs("form",{onSubmit:p,children:[N,H]})]}),e[48]=p,e[49]=N,e[50]=H,e[51]=B):B=e[51];let A;return e[52]!==i||e[53]!==b||e[54]!==B?(A=s.jsx(te,{open:b,onOpenChange:i,children:B}),e[52]=i,e[53]=b,e[54]=B,e[55]=A):A=e[55],A}function Ce(){q.error("Failed to create role")}function _e(R){const e=K.c(67),{open:b,onOpenChange:i,role:t,permissions:f}=R,y=t.name,n=t.description||"";let o;e[0]!==t.permissions?(o=t.permissions.map(Re),e[0]=t.permissions,e[1]=o):o=e[1];let d;e[2]!==t.name||e[3]!==n||e[4]!==o?(d={name:y,description:n,permissions:o},e[2]=t.name,e[3]=n,e[4]=o,e[5]=d):d=e[5];const{data:l,setData:r,put:a,processing:m,errors:p}=X(d);let c;e[6]!==t.description||e[7]!==t.name||e[8]!==t.permissions||e[9]!==r?(c=()=>{r({name:t.name,description:t.description||"",permissions:t.permissions.map(De)})},e[6]=t.description,e[7]=t.name,e[8]=t.permissions,e[9]=r,e[10]=c):c=e[10];let D;e[11]!==t?(D=[t],e[11]=t,e[12]=D):D=e[12],V.useEffect(c,D);let T;e[13]!==i||e[14]!==a||e[15]!==t.id?(T=F=>{F.preventDefault(),a(`/roles/${t.id}`,{onSuccess:()=>{i(!1),q.success("Role updated successfully")},onError:Ne})},e[13]=i,e[14]=a,e[15]=t.id,e[16]=T):T=e[16];const P=T;let v;e[17]!==l.permissions||e[18]!==r?(v=F=>{r("permissions",l.permissions.includes(F)?l.permissions.filter(L=>L!==F):[...l.permissions,F])},e[17]=l.permissions,e[18]=r,e[19]=v):v=e[19];const g=v;let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs(Y,{children:[s.jsx(Z,{children:"Edit Role"}),s.jsx(I,{children:"Update role details and permissions"})]}),e[20]=S):S=e[20];let k;e[21]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(U,{htmlFor:"name",children:"Name"}),e[21]=k):k=e[21];let w;e[22]!==r?(w=F=>r("name",F.target.value),e[22]=r,e[23]=w):w=e[23];let x;e[24]!==l.name||e[25]!==w?(x=s.jsx(W,{id:"name",value:l.name,onChange:w}),e[24]=l.name,e[25]=w,e[26]=x):x=e[26];let u;e[27]!==p.name?(u=p.name&&s.jsx("p",{className:"text-sm text-destructive",children:p.name}),e[27]=p.name,e[28]=u):u=e[28];let C;e[29]!==x||e[30]!==u?(C=s.jsxs("div",{className:"space-y-2",children:[k,x,u]}),e[29]=x,e[30]=u,e[31]=C):C=e[31];let _;e[32]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(U,{htmlFor:"description",children:"Description"}),e[32]=_):_=e[32];let j;e[33]!==r?(j=F=>r("description",F.target.value),e[33]=r,e[34]=j):j=e[34];let N;e[35]!==l.description||e[36]!==j?(N=s.jsxs("div",{className:"space-y-2",children:[_,s.jsx(W,{id:"description",value:l.description,onChange:j})]}),e[35]=l.description,e[36]=j,e[37]=N):N=e[37];let $;e[38]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(U,{children:"Permissions"}),e[38]=$):$=e[38];let O;if(e[39]!==l.permissions||e[40]!==f||e[41]!==g){let F;e[43]!==l.permissions||e[44]!==g?(F=L=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ne,{id:`permission-${L.id}`,checked:l.permissions.includes(L.id),onCheckedChange:()=>g(L.id)}),s.jsx("label",{htmlFor:`permission-${L.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:L.name})]},L.id),e[43]=l.permissions,e[44]=g,e[45]=F):F=e[45],O=f.map(F),e[39]=l.permissions,e[40]=f,e[41]=g,e[42]=O}else O=e[42];let H;e[46]!==O?(H=s.jsxs("div",{className:"space-y-2",children:[$,s.jsx("div",{className:"grid grid-cols-2 gap-4 border rounded-lg p-4 max-h-[300px] overflow-y-auto",children:O})]}),e[46]=O,e[47]=H):H=e[47];let B;e[48]!==C||e[49]!==N||e[50]!==H?(B=s.jsxs("div",{className:"space-y-4 py-4",children:[C,N,H]}),e[48]=C,e[49]=N,e[50]=H,e[51]=B):B=e[51];let A;e[52]!==i?(A=s.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[52]=i,e[53]=A):A=e[53];let h;e[54]!==m?(h=s.jsx(M,{type:"submit",disabled:m,children:"Update"}),e[54]=m,e[55]=h):h=e[55];let E;e[56]!==A||e[57]!==h?(E=s.jsxs(ee,{children:[A,h]}),e[56]=A,e[57]=h,e[58]=E):E=e[58];let z;e[59]!==P||e[60]!==B||e[61]!==E?(z=s.jsxs(se,{className:"max-w-2xl",children:[S,s.jsxs("form",{onSubmit:P,children:[B,E]})]}),e[59]=P,e[60]=B,e[61]=E,e[62]=z):z=e[62];let Q;return e[63]!==i||e[64]!==b||e[65]!==z?(Q=s.jsx(te,{open:b,onOpenChange:i,children:z}),e[63]=i,e[64]=b,e[65]=z,e[66]=Q):Q=e[66],Q}function Ne(){q.error("Failed to update role")}function De(R){return R.id}function Re(R){return R.id}function Se(R){const e=K.c(22),{open:b,onOpenChange:i,role:t}=R,{delete:f,processing:y}=X();let n;e[0]!==f||e[1]!==i||e[2]!==t.id?(n=()=>{f(`/roles/${t.id}`,{onSuccess:()=>{i(!1),q.success("Role deleted successfully")},onError:ke})},e[0]=f,e[1]=i,e[2]=t.id,e[3]=n):n=e[3];const o=n;let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(Z,{children:"Delete Role"}),e[4]=d):d=e[4];let l;e[5]!==t.name?(l=s.jsxs(Y,{children:[d,s.jsxs(I,{children:['Are you sure you want to delete the role "',t.name,'"? This action cannot be undone.']})]}),e[5]=t.name,e[6]=l):l=e[6];let r;e[7]!==i?(r=s.jsx(M,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e[7]=i,e[8]=r):r=e[8];let a;e[9]!==o||e[10]!==y?(a=s.jsx(M,{variant:"destructive",onClick:o,disabled:y,children:"Delete"}),e[9]=o,e[10]=y,e[11]=a):a=e[11];let m;e[12]!==r||e[13]!==a?(m=s.jsxs(ee,{children:[r,a]}),e[12]=r,e[13]=a,e[14]=m):m=e[14];let p;e[15]!==l||e[16]!==m?(p=s.jsxs(se,{children:[l,m]}),e[15]=l,e[16]=m,e[17]=p):p=e[17];let c;return e[18]!==i||e[19]!==b||e[20]!==p?(c=s.jsx(te,{open:b,onOpenChange:i,children:p}),e[18]=i,e[19]=b,e[20]=p,e[21]=c):c=e[21],c}function ke(){q.error("Failed to delete role")}const we=[{title:"Roles & Permissions",href:"/roles"}];function Ve(R){const e=K.c(36),{roles:b,permissions:i}=R,{auth:t}=re().props,[f,y]=V.useState(!1),[n,o]=V.useState(null),[d,l]=V.useState(null);let r;e[0]!==t.permissions?(r=t.permissions.includes("create_roles"),e[0]=t.permissions,e[1]=r):r=e[1];const a=r;let m;e[2]!==t.permissions?(m=t.permissions.includes("edit_roles"),e[2]=t.permissions,e[3]=m):m=e[3];const p=m;let c;e[4]!==t.permissions?(c=t.permissions.includes("delete_roles"),e[4]=t.permissions,e[5]=c):c=e[5];const D=c;let T;e[6]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(oe,{title:"Roles & Permissions"}),e[6]=T):T=e[6];let P;e[7]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Roles & Permissions"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage system roles and permissions"})]}),e[7]=P):P=e[7];let v;e[8]!==a?(v=a&&s.jsx(M,{onClick:()=>y(!0),children:"Create Role"}),e[8]=a,e[9]=v):v=e[9];let g;e[10]!==v?(g=s.jsxs("div",{className:"flex items-center justify-between",children:[P,v]}),e[10]=v,e[11]=g):g=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs(ce,{children:[s.jsx(de,{children:"Roles"}),s.jsx(me,{children:"Manage roles and their permissions"})]}),e[12]=S):S=e[12];const k=p?o:void 0,w=D?l:void 0;let x;e[13]!==b||e[14]!==w||e[15]!==k?(x=s.jsxs(pe,{children:[S,s.jsx(fe,{children:s.jsx(ge,{roles:b,onEdit:k,onDelete:w})})]}),e[13]=b,e[14]=w,e[15]=k,e[16]=x):x=e[16];let u;e[17]!==x||e[18]!==g?(u=s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[g,x]}),e[17]=x,e[18]=g,e[19]=u):u=e[19];let C;e[20]!==a||e[21]!==f||e[22]!==i?(C=a&&s.jsx(ve,{open:f,onOpenChange:y,permissions:i}),e[20]=a,e[21]=f,e[22]=i,e[23]=C):C=e[23];let _;e[24]!==p||e[25]!==n||e[26]!==i?(_=p&&n&&s.jsx(_e,{open:!!n,onOpenChange:$=>!$&&o(null),role:n,permissions:i}),e[24]=p,e[25]=n,e[26]=i,e[27]=_):_=e[27];let j;e[28]!==D||e[29]!==d?(j=D&&d&&s.jsx(Se,{open:!!d,onOpenChange:$=>!$&&l(null),role:d}),e[28]=D,e[29]=d,e[30]=j):j=e[30];let N;return e[31]!==u||e[32]!==C||e[33]!==_||e[34]!==j?(N=s.jsxs(ae,{breadcrumbs:we,children:[T,u,C,_,j]}),e[31]=u,e[32]=C,e[33]=_,e[34]=j,e[35]=N):N=e[35],N}export{Ve as default};
