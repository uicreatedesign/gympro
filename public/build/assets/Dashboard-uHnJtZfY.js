import{e as J,c as pe,r as je,j as s,b as ce,H as ge,t as K}from"./app-BszgJMo-.js";import{A as Ne}from"./app-layout-BtO4vqiq.js";import{c as C,b as M,a as L,d as ne,C as $}from"./card-Ck00td-d.js";import{B as be}from"./badge-lhIGe_2o.js";import{B as D}from"./app-logo-icon-BgP1ljne.js";import{L as ae,C as _e,e as ye}from"./app-sidebar-layout-ChmooSoC.js";import{D as ke}from"./download-CQ3_5PRn.js";/* empty css            */import"./index-Bu1MMGS5.js";import"./index-s20kuZOn.js";import"./index-Cx2XN_pX.js";const ve=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],we=J("ArrowRight",ve);const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],De=J("Clock",Se);const Ce=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],oe=J("LogIn",Ce);const Me=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Le=J("User",Me);function We(i){const e=pe.c(73),{member:r,currentSubscription:l,daysRemaining:X,subscriptionStatus:n,attendanceThisMonth:Z,lastCheckIn:t,recentPayments:E}=i,[c,A]=je.useState(!1);let I;e[0]!==r.id?(I=()=>{A(!0),ce.post("/attendances",{member_id:r.id,date:new Date().toISOString().split("T")[0],check_in_time:new Date().toTimeString().split(" ")[0],status:"present"},{onSuccess:Te,onError:Pe,onFinish:()=>{A(!1)}})},e[0]=r.id,e[1]=I):I=e[1];const ee=I;let P;e[2]!==t?(P=()=>{t&&(A(!0),ce.put(`/attendances/${t.id}`,{check_out_time:new Date().toTimeString().split(" ")[0]},{onSuccess:Ie,onError:Ae,onFinish:()=>{A(!1)}}))},e[2]=t,e[3]=P):P=e[3];const se=P;let T;e[4]===Symbol.for("react.memo_cache_sentinel")?(T={active:"bg-green-500",expiring:"bg-yellow-500",expired:"bg-red-500",none:"bg-gray-500"},e[4]=T):T=e[4];const de=T;let R;e[5]===Symbol.for("react.memo_cache_sentinel")?(R={active:"Active",expiring:"Expiring Soon",expired:"Expired",none:"No Active Plan"},e[5]=R):R=e[5];const me=R;let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(ge,{title:"My Dashboard"}),e[6]=F):F=e[6];const te=r.user?.name;let a;e[7]!==te?(a=s.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",te,"!"]}),e[7]=te,e[8]=a):a=e[8];let H;e[9]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("p",{className:"text-muted-foreground",children:"Here's your fitness journey overview"}),e[9]=H):H=e[9];let o;e[10]!==a?(o=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[a,H]})}),e[10]=a,e[11]=o):o=e[11];let O;e[12]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs("div",{children:[s.jsx(L,{className:"text-xl",children:"Membership Status"}),s.jsx(ne,{children:"Your current subscription"})]}),e[12]=O):O=e[12];const re=de[n],ie=me[n];let d;e[13]!==re||e[14]!==ie?(d=s.jsx($,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[O,s.jsx(be,{className:re,children:ie})]})}),e[13]=re,e[14]=ie,e[15]=d):d=e[15];let m;e[16]!==l||e[17]!==X||e[18]!==n?(m=s.jsx(C,{children:l?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),s.jsx("p",{className:"text-lg font-semibold",children:l.plan?.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Days Remaining"}),s.jsx("p",{className:"text-lg font-semibold",children:n==="expired"?"Expired":`${X} days`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"text-lg font-semibold",children:new Date(l.start_date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"End Date"}),s.jsx("p",{className:"text-lg font-semibold",children:new Date(l.end_date).toLocaleDateString()})]})]}),(n==="expiring"||n==="expired")&&s.jsx(D,{className:"w-full",children:"Renew Membership"})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have an active subscription"}),s.jsx(D,{children:"Contact Admin"})]})}),e[16]=l,e[17]=X,e[18]=n,e[19]=m):m=e[19];let x;e[20]!==d||e[21]!==m?(x=s.jsxs(M,{className:"border-2",children:[d,m]}),e[20]=d,e[21]=m,e[22]=x):x=e[22];let z;e[23]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs($,{children:[s.jsx(L,{className:"text-xl",children:"Quick Check-in"}),s.jsx(ne,{children:"Mark your attendance for today"})]}),e[23]=z):z=e[23];let h;e[24]!==ee||e[25]!==se||e[26]!==t||e[27]!==c?(h=s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t&&new Date(t.date).toDateString()===new Date().toDateString()?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:s.jsx(oe,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked In"}),s.jsx("p",{className:"text-lg font-semibold",children:t.check_in_time})]})]}),t.check_out_time?s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-950 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center",children:s.jsx(ae,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked Out"}),s.jsx("p",{className:"text-lg font-semibold",children:t.check_out_time})]})]}):s.jsxs(D,{size:"lg",variant:"destructive",className:"h-full",onClick:se,disabled:c,children:[s.jsx(ae,{className:"mr-2 h-5 w-5"}),c?"Processing...":"Check Out"]})]}):s.jsxs(D,{size:"lg",className:"md:col-span-2",onClick:ee,disabled:c,children:[s.jsx(oe,{className:"mr-2 h-5 w-5"}),c?"Processing...":"Check In Now"]})}),e[24]=ee,e[25]=se,e[26]=t,e[27]=c,e[28]=h):h=e[28];let f;e[29]!==t?(f=t&&new Date(t.date).toDateString()===new Date().toDateString()&&t.check_in_time&&t.check_out_time&&s.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg flex items-center gap-2",children:[s.jsx(De,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total time today: ",(()=>{const xe=new Date(`2000-01-01 ${t.check_in_time}`),he=new Date(`2000-01-01 ${t.check_out_time}`),le=Math.abs(he.getTime()-xe.getTime()),fe=Math.floor(le/36e5),ue=Math.floor(le%36e5/6e4);return`${fe}h ${ue}m`})()]})]}),e[29]=t,e[30]=f):f=e[30];let u;e[31]!==h||e[32]!==f?(u=s.jsxs(M,{className:"border-2 border-primary",children:[z,s.jsxs(C,{children:[h,f]})]}),e[31]=h,e[32]=f,e[33]=u):u=e[33];let p;e[34]!==x||e[35]!==u?(p=s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[x,u]}),e[34]=x,e[35]=u,e[36]=p):p=e[36];let B;e[37]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(L,{className:"text-sm font-medium",children:"Attendance This Month"}),s.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})]}),e[37]=B):B=e[37];let j;e[38]!==Z?(j=s.jsxs("div",{className:"text-2xl font-bold",children:[Z," days"]}),e[38]=Z,e[39]=j):j=e[39];let g;e[40]!==t?(g=t&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last check-in: ",new Date(t.date).toLocaleDateString()," at ",t.check_in_time]}),e[40]=t,e[41]=g):g=e[41];let U;e[42]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs(D,{variant:"link",className:"p-0 h-auto mt-2",children:["View Full History ",s.jsx(we,{className:"h-3 w-3 ml-1"})]}),e[42]=U):U=e[42];let N;e[43]!==j||e[44]!==g?(N=s.jsxs(M,{className:"cursor-pointer hover:border-primary transition-colors",onClick:Ee,children:[B,s.jsxs(C,{children:[j,g,U]})]}),e[43]=j,e[44]=g,e[45]=N):N=e[45];let Y;e[46]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(L,{className:"text-sm font-medium",children:"My Profile"}),s.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e[46]=Y):Y=e[46];let q;e[47]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("span",{className:"text-muted-foreground",children:"Email:"}),e[47]=q):q=e[47];let b;e[48]!==r.email?(b=s.jsxs("p",{className:"text-sm",children:[q," ",r.email]}),e[48]=r.email,e[49]=b):b=e[49];let Q;e[50]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),e[50]=Q):Q=e[50];let _;e[51]!==r.phone?(_=s.jsxs("p",{className:"text-sm",children:[Q," ",r.phone]}),e[51]=r.phone,e[52]=_):_=e[52];let V;e[53]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("span",{className:"text-muted-foreground",children:"Member Since:"}),e[53]=V):V=e[53];let y;e[54]!==r.join_date?(y=new Date(r.join_date).toLocaleDateString(),e[54]=r.join_date,e[55]=y):y=e[55];let k;e[56]!==y?(k=s.jsxs("p",{className:"text-sm",children:[V," ",y]}),e[56]=y,e[57]=k):k=e[57];let v;e[58]!==b||e[59]!==_||e[60]!==k?(v=s.jsxs(M,{children:[Y,s.jsx(C,{children:s.jsxs("div",{className:"space-y-1",children:[b,_,k]})})]}),e[58]=b,e[59]=_,e[60]=k,e[61]=v):v=e[61];let w;e[62]!==N||e[63]!==v?(w=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[N,v]}),e[62]=N,e[63]=v,e[64]=w):w=e[64];let W;e[65]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx($,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(L,{children:"Recent Payments"}),s.jsx(ne,{children:"Your payment history"})]}),s.jsx(ye,{className:"h-5 w-5 text-muted-foreground"})]})}),e[65]=W):W=e[65];let S;e[66]!==E?(S=s.jsxs(M,{children:[W,s.jsx(C,{children:E.length>0?s.jsx("div",{className:"space-y-3",children:E.map($e)}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No payment history"})})]}),e[66]=E,e[67]=S):S=e[67];let G;return e[68]!==p||e[69]!==w||e[70]!==S||e[71]!==o?(G=s.jsxs(Ne,{children:[F,s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[o,p,w,S]})]}),e[68]=p,e[69]=w,e[70]=S,e[71]=o,e[72]=G):G=e[72],G}function $e(i){return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:i.invoice_number}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.subscription?.plan?.name||"N/A"," • ",new Date(i.payment_date).toLocaleDateString()," • ",i.payment_method.toUpperCase()]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold",children:["₹",i.amount]}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:i.payment_type})]}),s.jsx(D,{variant:"ghost",size:"icon",onClick:()=>window.open(`/payments/${i.id}/invoice`,"_blank"),children:s.jsx(ke,{className:"h-4 w-4"})})]})]},i.id)}function Ee(){return window.location.href="/member/attendance"}function Ae(){K.error("Failed to check out")}function Ie(){K.success("Checked out successfully")}function Pe(){K.error("Failed to check in")}function Te(){K.success("Checked in successfully")}export{We as default};
