import{e as K,c as fe,r as pe,j as s,b as G,t as J,H as je}from"./app-CQMROZin.js";import{A as ge}from"./app-layout-Dt9qo_ia.js";import{c as D,b as C,C as M,a as L,d as ae}from"./card-Dzw48jq2.js";import{B as Ne}from"./badge-CUyMWOHZ.js";import{B as S}from"./app-logo-icon-9U0fWc1D.js";import{L as ne,C as be,e as ye}from"./app-sidebar-layout-Bod0TseD.js";import{D as _e}from"./download-CjnUg0xn.js";/* empty css            */import"./index-CKM3Bggy.js";import"./index-Bdj3ZHBY.js";import"./index-Cx2XN_pX.js";const ke=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ve=K("ArrowRight",ke);const we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Se=K("Clock",we);const De=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],ce=K("LogIn",De);const Ce=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Me=K("User",Ce);function qe(l){const e=fe.c(71),{member:r,currentSubscription:a,daysRemaining:X,subscriptionStatus:i,attendanceThisMonth:Z,lastCheckIn:t,recentPayments:$}=l,[n,E]=pe.useState(!1);let P;e[0]!==r.id?(P=()=>{E(!0),G.post("/attendances",{member_id:r.id,date:new Date().toISOString().split("T")[0],check_in_time:new Date().toTimeString().split(" ")[0],status:"present"},{onSuccess:Pe,onError:()=>{J.error("Failed to check in"),E(!1)}})},e[0]=r.id,e[1]=P):P=e[1];const ee=P;let A;e[2]!==t?(A=()=>{t&&(E(!0),G.put(`/attendances/${t.id}`,{check_out_time:new Date().toTimeString().split(" ")[0]},{onSuccess:Ee,onError:()=>{J.error("Failed to check out"),E(!1)}}))},e[2]=t,e[3]=A):A=e[3];const se=A;let I;e[4]===Symbol.for("react.memo_cache_sentinel")?(I={active:"bg-green-500",expiring:"bg-yellow-500",expired:"bg-red-500",none:"bg-gray-500"},e[4]=I):I=e[4];const oe=I;let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T={active:"Active",expiring:"Expiring Soon",expired:"Expired",none:"No Active Plan"},e[5]=T):T=e[5];const de=T;let R;e[6]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(je,{title:"My Dashboard"}),e[6]=R):R=e[6];const te=r.user?.name;let c;e[7]!==te?(c=s.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",te,"!"]}),e[7]=te,e[8]=c):c=e[8];let z;e[9]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("p",{className:"text-muted-foreground",children:"Here's your fitness journey overview"}),e[9]=z):z=e[9];let o;e[10]!==c?(o=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[c,z]})}),e[10]=c,e[11]=o):o=e[11];let H;e[12]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs(M,{children:[s.jsx(L,{className:"text-xl",children:"Quick Check-in"}),s.jsx(ae,{children:"Mark your attendance for today"})]}),e[12]=H):H=e[12];let d;e[13]!==ee||e[14]!==se||e[15]!==t||e[16]!==n?(d=s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t&&new Date(t.date).toDateString()===new Date().toDateString()?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-950 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:s.jsx(ce,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked In"}),s.jsx("p",{className:"text-lg font-semibold",children:t.check_in_time})]})]}),t.check_out_time?s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-950 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center",children:s.jsx(ne,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked Out"}),s.jsx("p",{className:"text-lg font-semibold",children:t.check_out_time})]})]}):s.jsxs(S,{size:"lg",variant:"destructive",className:"h-full",onClick:se,disabled:n,children:[s.jsx(ne,{className:"mr-2 h-5 w-5"}),n?"Processing...":"Check Out"]})]}):s.jsxs(S,{size:"lg",className:"md:col-span-2",onClick:ee,disabled:n,children:[s.jsx(ce,{className:"mr-2 h-5 w-5"}),n?"Processing...":"Check In Now"]})}),e[13]=ee,e[14]=se,e[15]=t,e[16]=n,e[17]=d):d=e[17];let m;e[18]!==t?(m=t&&new Date(t.date).toDateString()===new Date().toDateString()&&t.check_in_time&&t.check_out_time&&s.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg flex items-center gap-2",children:[s.jsx(Se,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total time today: ",(()=>{const me=new Date(`2000-01-01 ${t.check_in_time}`),xe=new Date(`2000-01-01 ${t.check_out_time}`),ie=Math.abs(xe.getTime()-me.getTime()),he=Math.floor(ie/36e5),ue=Math.floor(ie%36e5/6e4);return`${he}h ${ue}m`})()]})]}),e[18]=t,e[19]=m):m=e[19];let x;e[20]!==d||e[21]!==m?(x=s.jsxs(C,{className:"border-2 border-primary",children:[H,s.jsxs(D,{children:[d,m]})]}),e[20]=d,e[21]=m,e[22]=x):x=e[22];let O;e[23]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs("div",{children:[s.jsx(L,{className:"text-2xl",children:"Membership Status"}),s.jsx(ae,{children:"Your current subscription details"})]}),e[23]=O):O=e[23];const re=oe[i],le=de[i];let h;e[24]!==re||e[25]!==le?(h=s.jsx(M,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[O,s.jsx(Ne,{className:re,children:le})]})}),e[24]=re,e[25]=le,e[26]=h):h=e[26];let u;e[27]!==a||e[28]!==X||e[29]!==i?(u=s.jsx(D,{children:a?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),s.jsx("p",{className:"text-lg font-semibold",children:a.plan?.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Days Remaining"}),s.jsx("p",{className:"text-lg font-semibold",children:i==="expired"?"Expired":`${X} days`})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"text-lg font-semibold",children:new Date(a.start_date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"End Date"}),s.jsx("p",{className:"text-lg font-semibold",children:new Date(a.end_date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),s.jsx("p",{className:"text-lg font-semibold capitalize",children:a.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment Status"}),s.jsx("p",{className:"text-lg font-semibold capitalize",children:a.payment_status})]})]}),(i==="expiring"||i==="expired")&&s.jsx(S,{className:"w-full",children:"Renew Membership"})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have an active subscription"}),s.jsx(S,{children:"Contact Admin"})]})}),e[27]=a,e[28]=X,e[29]=i,e[30]=u):u=e[30];let f;e[31]!==h||e[32]!==u?(f=s.jsxs(C,{className:"border-2",children:[h,u]}),e[31]=h,e[32]=u,e[33]=f):f=e[33];let B;e[34]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(L,{className:"text-sm font-medium",children:"Attendance This Month"}),s.jsx(be,{className:"h-4 w-4 text-muted-foreground"})]}),e[34]=B):B=e[34];let p;e[35]!==Z?(p=s.jsxs("div",{className:"text-2xl font-bold",children:[Z," days"]}),e[35]=Z,e[36]=p):p=e[36];let j;e[37]!==t?(j=t&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last check-in: ",new Date(t.date).toLocaleDateString()," at ",t.check_in_time]}),e[37]=t,e[38]=j):j=e[38];let F;e[39]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsxs(S,{variant:"link",className:"p-0 h-auto mt-2",children:["View Full History ",s.jsx(ve,{className:"h-3 w-3 ml-1"})]}),e[39]=F):F=e[39];let g;e[40]!==p||e[41]!==j?(g=s.jsxs(C,{className:"cursor-pointer hover:border-primary transition-colors",onClick:$e,children:[B,s.jsxs(D,{children:[p,j,F]})]}),e[40]=p,e[41]=j,e[42]=g):g=e[42];let U;e[43]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(L,{className:"text-sm font-medium",children:"My Profile"}),s.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})]}),e[43]=U):U=e[43];let Y;e[44]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("span",{className:"text-muted-foreground",children:"Email:"}),e[44]=Y):Y=e[44];let N;e[45]!==r.email?(N=s.jsxs("p",{className:"text-sm",children:[Y," ",r.email]}),e[45]=r.email,e[46]=N):N=e[46];let q;e[47]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),e[47]=q):q=e[47];let b;e[48]!==r.phone?(b=s.jsxs("p",{className:"text-sm",children:[q," ",r.phone]}),e[48]=r.phone,e[49]=b):b=e[49];let Q;e[50]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx("span",{className:"text-muted-foreground",children:"Member Since:"}),e[50]=Q):Q=e[50];let y;e[51]!==r.join_date?(y=new Date(r.join_date).toLocaleDateString(),e[51]=r.join_date,e[52]=y):y=e[52];let _;e[53]!==y?(_=s.jsxs("p",{className:"text-sm",children:[Q," ",y]}),e[53]=y,e[54]=_):_=e[54];let k;e[55]!==N||e[56]!==b||e[57]!==_?(k=s.jsxs(C,{children:[U,s.jsx(D,{children:s.jsxs("div",{className:"space-y-1",children:[N,b,_]})})]}),e[55]=N,e[56]=b,e[57]=_,e[58]=k):k=e[58];let v;e[59]!==g||e[60]!==k?(v=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[g,k]}),e[59]=g,e[60]=k,e[61]=v):v=e[61];let V;e[62]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(M,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(L,{children:"Recent Payments"}),s.jsx(ae,{children:"Your payment history"})]}),s.jsx(ye,{className:"h-5 w-5 text-muted-foreground"})]})}),e[62]=V):V=e[62];let w;e[63]!==$?(w=s.jsxs(C,{children:[V,s.jsx(D,{children:$.length>0?s.jsx("div",{className:"space-y-3",children:$.map(Le)}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No payment history"})})]}),e[63]=$,e[64]=w):w=e[64];let W;return e[65]!==x||e[66]!==f||e[67]!==v||e[68]!==w||e[69]!==o?(W=s.jsxs(ge,{children:[R,s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[o,x,f,v,w]})]}),e[65]=x,e[66]=f,e[67]=v,e[68]=w,e[69]=o,e[70]=W):W=e[70],W}function Le(l){return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:l.invoice_number}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.subscription?.plan?.name||"N/A"," • ",new Date(l.payment_date).toLocaleDateString()," • ",l.payment_method.toUpperCase()]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold",children:["₹",l.amount]}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:l.payment_type})]}),s.jsx(S,{variant:"ghost",size:"icon",onClick:()=>window.open(`/payments/${l.id}/invoice`,"_blank"),children:s.jsx(_e,{className:"h-4 w-4"})})]})]},l.id)}function $e(){return window.location.href="/member/attendance"}function Ee(){J.success("Checked out successfully"),G.reload()}function Pe(){J.success("Checked in successfully"),G.reload()}export{qe as default};
