import{e as v,a as y,r as w,j as e,H as k,b as d,t as r}from"./app-CeYbb0ey.js";import{A as C}from"./app-layout-C80MmBOv.js";import{B as i}from"./app-logo-icon-BJjrVBLl.js";import{B as u}from"./app-sidebar-layout-VvhSTCcV.js";import{C as T}from"./index-BOxVAIo7.js";import{T as A}from"./trash-2-CrzNtv0T.js";/* empty css            */import"./app-logo-DqAeFtE0.js";import"./index-mWMNGgim.js";import"./index-Cx2XN_pX.js";import"./users-CHsfhasw.js";const _=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],E=v("Archive",_),M=[{title:"Notifications",href:"/notifications"}];function P({notifications:a}){const{props:p}=y(),[o,t]=w.useState(!1),c=()=>p.csrf_token||"",f=async s=>{t(!0);try{await fetch(`/api/notifications/${s}/read`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":c()}}),r.success("Marked as read"),d.reload()}catch{r.error("Failed to mark as read")}finally{t(!1)}},j=async s=>{t(!0);try{await fetch(`/api/notifications/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":c()}}),r.success("Deleted"),d.reload()}catch{r.error("Failed to delete")}finally{t(!1)}},g=async()=>{t(!0);try{await fetch("/api/notifications/mark-all-read",{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":c()}}),r.success("All marked as read"),d.reload()}catch{r.error("Failed")}finally{t(!1)}},N=a.data.some(s=>!s.read_at),b=s=>{const l=new Date(s),n=new Date().getTime()-l.getTime(),m=Math.floor(n/6e4),h=Math.floor(n/36e5),x=Math.floor(n/864e5);return m<1?"just now":m<60?`${m}m ago`:h<24?`${h}h ago`:x<7?`${x}d ago`:l.toLocaleDateString()};return e.jsxs(C,{breadcrumbs:M,children:[e.jsx(k,{title:"Notifications"}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:e.jsx(u,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.meta.total," ",a.meta.total===1?"notification":"notifications"]})]})]}),N&&e.jsxs(i,{variant:"outline",size:"sm",onClick:g,disabled:o,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Mark all read"]})]}),e.jsx("div",{className:"space-y-3",children:a.data.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsx(u,{className:"h-8 w-8 text-muted-foreground opacity-50"})})}),e.jsx("p",{className:"text-muted-foreground",children:"No notifications yet"})]}):a.data.map(s=>e.jsxs("div",{className:`flex items-start gap-4 p-4 rounded-lg border transition-colors ${s.read_at?"bg-background border-border hover:bg-muted/50":"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-900"}`,children:[!s.read_at&&e.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm leading-tight",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:s.message})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:b(s.created_at)})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[!s.read_at&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>f(s.id),disabled:o,className:"h-8 w-8 p-0",title:"Mark as read",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>j(s.id),disabled:o,className:"h-8 w-8 p-0 text-destructive hover:text-destructive",title:"Delete",children:e.jsx(A,{className:"h-4 w-4"})})]})]},s.id))}),a.meta.last_page>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-8 pt-6 border-t",children:a.links.map((s,l)=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&d.visit(s.url),className:"h-8 w-8 p-0",children:s.label.replace(/&laquo;|&raquo;/g,"").trim()||"..."},l))})]})]})}export{P as default};
