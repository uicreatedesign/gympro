import{e as ie,c as be,r as oe,j as t,b as F,H as ye,L as Ne}from"./app-Br_IyjXx.js";import{A as _e}from"./app-layout-8jzzkFug.js";import{b as te,c as se,a as ve,C as Se}from"./card-Kjq8ebg2.js";import{B as le}from"./app-logo-icon-B6Htic-O.js";import{j as ne,B as ce}from"./app-sidebar-layout-BJ3dFsrI.js";import{S as de,a as me,b as fe,d as $,c as ue}from"./select-1xAPKBwa.js";import{t as L,c as ke,e as Me,n as ge,d as we,g as xe,a as De,b as Ce,m as he,f as ae}from"./en-US-BDqzE9Ni.js";import{C as Te}from"./check-BpO2Dj1c.js";import{T as Ie}from"./trash-2-CBvB10Wl.js";import{M as Ae}from"./mail-_3hHiY3m.js";/* empty css            */import"./index-B68cjjcD.js";import"./app-logo-56Jlm6mP.js";import"./index-DM7y-QPr.js";import"./index-7Qy87jYC.js";import"./index-Cx2XN_pX.js";import"./index-p0m3uJQQ.js";import"./chevron-down-DQSk0qkB.js";const Oe=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Xe=ie("CheckCheck",Oe);const Le=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Re=ie("Filter",Le);const He=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],$e=ie("MailOpen",He);function re(s,e){const a=+L(s)-+L(e);return a<0?-1:a>0?1:a}function Fe(s){return ke(s,Date.now())}function ze(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function Be(s,e){return+L(s)-+L(e)}function Ee(s,e){const a=L(s,e?.in);return a.setHours(23,59,59,999),a}function Ve(s,e){const a=L(s,e?.in);return+Ee(a,e)==+Me(a,e)}function Ye(s,e,a){const[n,r,x]=ge(a?.in,s,s,e),c=re(r,x),l=Math.abs(we(r,x));if(l<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-c*l);let d=re(r,x)===-c;Ve(n)&&l===1&&re(n,x)===1&&(d=!1);const h=c*(l-+d);return h===0?0:h}function qe(s,e,a){const n=Be(s,e)/1e3;return ze(a?.roundingMethod)(n)}function Ue(s,e,a){const n=De(),r=a?.locale??n.locale??Ce,x=2520,c=re(s,e);if(isNaN(c))throw new RangeError("Invalid time value");const l=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:c}),[d,h]=ge(a?.in,...c>0?[e,s]:[s,e]),m=qe(h,d),R=(xe(h)-xe(d))/1e3,o=Math.round((m-R)/60);let f;if(o<2)return a?.includeSeconds?m<5?r.formatDistance("lessThanXSeconds",5,l):m<10?r.formatDistance("lessThanXSeconds",10,l):m<20?r.formatDistance("lessThanXSeconds",20,l):m<40?r.formatDistance("halfAMinute",0,l):m<60?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",1,l):o===0?r.formatDistance("lessThanXMinutes",1,l):r.formatDistance("xMinutes",o,l);if(o<45)return r.formatDistance("xMinutes",o,l);if(o<90)return r.formatDistance("aboutXHours",1,l);if(o<he){const u=Math.round(o/60);return r.formatDistance("aboutXHours",u,l)}else{if(o<x)return r.formatDistance("xDays",1,l);if(o<ae){const u=Math.round(o/he);return r.formatDistance("xDays",u,l)}else if(o<ae*2)return f=Math.round(o/ae),r.formatDistance("aboutXMonths",f,l)}if(f=Ye(h,d),f<12){const u=Math.round(o/ae);return r.formatDistance("xMonths",u,l)}else{const u=f%12,H=Math.trunc(f/12);return u<3?r.formatDistance("aboutXYears",H,l):u<9?r.formatDistance("overXYears",H,l):r.formatDistance("almostXYears",H+1,l)}}function Pe(s,e){return Ue(s,Fe(s),e)}function jt(s){const e=be.c(72),{notifications:a,stats:n,types:r,filters:x}=s,[c,l]=oe.useState(x?.filter||"all"),[d,h]=oe.useState(x?.type||"all");let m;e[0]!==d?(m=i=>{l(i),F.get("/notifications",{filter:i==="all"?void 0:i,type:d==="all"?void 0:d},{preserveState:!0})},e[0]=d,e[1]=m):m=e[1];const R=m;let o;e[2]!==c?(o=i=>{h(i),F.get("/notifications",{filter:c==="all"?void 0:c,type:i==="all"?void 0:i},{preserveState:!0})},e[2]=c,e[3]=o):o=e[3];const f=o,u=We,H=Qe,pe=Ke,je=Je;let z;e[4]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(ye,{title:"Notifications"}),e[4]=z):z=e[4];let B;e[5]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ne,{className:"h-6 w-6"}),t.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"})]}),e[5]=B):B=e[5];let g;e[6]!==n.unread?(g=n.unread>0&&t.jsxs(le,{onClick:H,variant:"outline",size:"sm",children:[t.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Mark All Read"]}),e[6]=n.unread,e[7]=g):g=e[7];let p;e[8]!==g?(p=t.jsxs("div",{className:"flex items-center justify-between",children:[B,g]}),e[8]=g,e[9]=p):p=e[9];let E;e[10]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e[10]=E):E=e[10];let j;e[11]!==n.total?(j=t.jsxs("div",{children:[E,t.jsx("p",{className:"text-2xl font-bold",children:n.total})]}),e[11]=n.total,e[12]=j):j=e[12];let V;e[13]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(ne,{className:"h-8 w-8 text-muted-foreground"}),e[13]=V):V=e[13];let b;e[14]!==j?(b=t.jsx(te,{children:t.jsx(se,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[j,V]})})}),e[14]=j,e[15]=b):b=e[15];let Y;e[16]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Unread"}),e[16]=Y):Y=e[16];let y;e[17]!==n.unread?(y=t.jsxs("div",{children:[Y,t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.unread})]}),e[17]=n.unread,e[18]=y):y=e[18];let q;e[19]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(Ae,{className:"h-8 w-8 text-blue-600"}),e[19]=q):q=e[19];let N;e[20]!==y?(N=t.jsx(te,{children:t.jsx(se,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[y,q]})})}),e[20]=y,e[21]=N):N=e[21];let U;e[22]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Read"}),e[22]=U):U=e[22];let _;e[23]!==n.read?(_=t.jsxs("div",{children:[U,t.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.read})]}),e[23]=n.read,e[24]=_):_=e[24];let P;e[25]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx($e,{className:"h-8 w-8 text-green-600"}),e[25]=P):P=e[25];let v;e[26]!==_?(v=t.jsx(te,{children:t.jsx(se,{className:"pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[_,P]})})}),e[26]=_,e[27]=v):v=e[27];let S;e[28]!==b||e[29]!==N||e[30]!==v?(S=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[b,N,v]}),e[28]=b,e[29]=N,e[30]=v,e[31]=S):S=e[31];let Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(ve,{children:"Notifications"}),e[32]=Z):Z=e[32];let G;e[33]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(Re,{className:"h-4 w-4"}),e[33]=G):G=e[33];let J;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(de,{className:"w-32",children:t.jsx(me,{})}),e[34]=J):J=e[34];let K;e[35]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsxs(fe,{children:[t.jsx($,{value:"all",children:"All"}),t.jsx($,{value:"unread",children:"Unread"}),t.jsx($,{value:"read",children:"Read"})]}),e[35]=K):K=e[35];let k;e[36]!==R||e[37]!==c?(k=t.jsxs(ue,{value:c,onValueChange:R,children:[J,K]}),e[36]=R,e[37]=c,e[38]=k):k=e[38];let Q;e[39]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(de,{className:"w-40",children:t.jsx(me,{placeholder:"All Types"})}),e[39]=Q):Q=e[39];let W;e[40]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx($,{value:"all",children:"All Types"}),e[40]=W):W=e[40];let M;e[41]!==r?(M=r?.map(Ge),e[41]=r,e[42]=M):M=e[42];let w;e[43]!==M?(w=t.jsxs(fe,{children:[W,M]}),e[43]=M,e[44]=w):w=e[44];let D;e[45]!==f||e[46]!==d||e[47]!==w?(D=t.jsxs(ue,{value:d,onValueChange:f,children:[Q,w]}),e[45]=f,e[46]=d,e[47]=w,e[48]=D):D=e[48];let C;e[49]!==k||e[50]!==D?(C=t.jsx(Se,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[Z,t.jsxs("div",{className:"flex items-center gap-2",children:[G,k,D]})]})}),e[49]=k,e[50]=D,e[51]=C):C=e[51];let T;e[52]!==a.data?(T=a.data.length===0?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(ne,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No notifications found"})]}):a.data.map(i=>t.jsx("div",{className:`p-4 border rounded-lg transition-colors ${i.read_at?"bg-gray-50 dark:bg-gray-900/50":"bg-white dark:bg-gray-800 border-blue-200 dark:border-blue-800"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:i.color}}),t.jsx("h3",{className:`font-medium ${i.read_at?"":"font-semibold"}`,children:i.title}),t.jsx(ce,{className:je(i.priority),children:i.priority}),!i.read_at&&t.jsx(ce,{variant:"secondary",className:"text-xs",children:"New"})]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:i.message}),t.jsx("p",{className:"text-xs text-muted-foreground",children:Pe(new Date(i.created_at),{addSuffix:!0})})]}),t.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[!i.read_at&&t.jsx(le,{onClick:()=>u(i.id),variant:"ghost",size:"sm",children:t.jsx(Te,{className:"h-4 w-4"})}),t.jsx(le,{onClick:()=>pe(i.id),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:t.jsx(Ie,{className:"h-4 w-4"})})]})]})},i.id)),e[52]=a.data,e[53]=T):T=e[53];let I;e[54]!==T?(I=t.jsx("div",{className:"space-y-4",children:T}),e[54]=T,e[55]=I):I=e[55];let A;e[56]!==a.links||e[57]!==a.meta?.from||e[58]!==a.meta?.last_page||e[59]!==a.meta?.to||e[60]!==a.meta?.total?(A=a.meta?.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between mt-8 pt-4 border-t",children:[t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",a.meta?.from," to ",a.meta?.to," of ",a.meta?.total," notifications"]}),t.jsx("div",{className:"flex items-center gap-2",children:a.links?.map(Ze)})]}),e[56]=a.links,e[57]=a.meta?.from,e[58]=a.meta?.last_page,e[59]=a.meta?.to,e[60]=a.meta?.total,e[61]=A):A=e[61];let O;e[62]!==I||e[63]!==A?(O=t.jsxs(se,{className:"p-6",children:[I,A]}),e[62]=I,e[63]=A,e[64]=O):O=e[64];let X;e[65]!==C||e[66]!==O?(X=t.jsxs(te,{children:[C,O]}),e[65]=C,e[66]=O,e[67]=X):X=e[67];let ee;return e[68]!==S||e[69]!==X||e[70]!==p?(ee=t.jsxs(_e,{children:[z,t.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[p,S,X]})]}),e[68]=S,e[69]=X,e[70]=p,e[71]=ee):ee=e[71],ee}function Ze(s,e){return t.jsx(Ne,{href:s.url||"#",className:`px-3 py-1 text-sm rounded ${s.active?"bg-blue-600 text-white":s.url?"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700":"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-600"}`,dangerouslySetInnerHTML:{__html:s.label}},e)}function Ge(s){return t.jsx($,{value:s.value,children:s.label},s.value)}function Je(s){switch(s){case"urgent":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"normal":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"low":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}}function Ke(s){confirm("Are you sure you want to delete this notification?")&&F.delete(`/notifications/${s}`,{preserveScroll:!0})}function Qe(){F.patch("/notifications/mark-all-read",{},{preserveScroll:!0})}function We(s){F.patch(`/notifications/${s}/read`,{},{preserveScroll:!0})}export{jt as default};
