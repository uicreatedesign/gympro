import{e as ht,c as Xe,j as t,r as Fe,u as st,t as Ue,b as We,H as ut}from"./app-CWQzBnNl.js";import{a as xt,P as Ye,b as ft,c as _t,S as jt,d as gt,e as bt,f as yt,g as vt}from"./pagination-BlqW_8-Q.js";import{A as St}from"./app-layout-Dh3nhCHq.js";import{B as Ne}from"./app-logo-icon-Bqc3Bh6X.js";import{b as Ze,c as Je,C as et,a as tt}from"./card-COiKwC-H.js";import{I as Te}from"./input-DKKmjKYk.js";import{c as be,S as ye,a as ve,b as Se,d as x}from"./select-BvmEL5Qi.js";import{B as dt}from"./badge-CJSffrFS.js";import{b as Ce,c as Nt,T as ot,a as we,P as Ct,d as wt,e as kt}from"./table-BE_7wqr8.js";import{T as Pt}from"./trash-2-DsBe0dhr.js";import{D as lt,a as at,b as it,c as nt,d as rt,e as ct}from"./dialog-Dp1Vet2W.js";import{L as D}from"./label-DqhS0g7n.js";import{T as pt}from"./textarea-C9vQkO1v.js";import{C as Dt}from"./checkbox-C82Yi5td.js";import{P as Ft}from"./plus-BWGwfkAm.js";import{C as Tt}from"./circle-check-big-En1t938L.js";import{C as At}from"./circle-x-DHGyCgNA.js";import{X as Et}from"./app-logo-DqKSA1DP.js";/* empty css            */import"./chevron-left-B70-aDao.js";import"./app-sidebar-layout-DS8fb3G9.js";import"./index-YditoyNA.js";import"./index-MWaObWSV.js";import"./index-Cx2XN_pX.js";import"./index-DIv5bmjL.js";import"./chevron-down-wI3JFMuA.js";import"./check-d8A9s_PJ.js";const Mt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],mt=ht("FileText",Mt);function Vt(p){const e=Xe.c(25),{subscriptions:r,onEdit:n,onDelete:s}=p;let _,j,m,f,g,y,a,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(Ce,{className:"w-16",children:"Sr No"}),j=t.jsx(Ce,{children:"Member"}),m=t.jsx(Ce,{children:"Plan"}),f=t.jsx(Ce,{children:"Start Date"}),g=t.jsx(Ce,{children:"End Date"}),y=t.jsx(Ce,{children:"Amount"}),a=t.jsx(Ce,{children:"Payment"}),l=t.jsx(Ce,{children:"Status"}),e[0]=_,e[1]=j,e[2]=m,e[3]=f,e[4]=g,e[5]=y,e[6]=a,e[7]=l):(_=e[0],j=e[1],m=e[2],f=e[3],g=e[4],y=e[5],a=e[6],l=e[7]);let i;e[8]!==s||e[9]!==n?(i=(n||s)&&t.jsx(Ce,{className:"text-right",children:"Actions"}),e[8]=s,e[9]=n,e[10]=i):i=e[10];let Y;e[11]!==i?(Y=t.jsx(Nt,{children:t.jsxs(ot,{children:[_,j,m,f,g,y,a,l,i]})}),e[11]=i,e[12]=Y):Y=e[12];let c;if(e[13]!==s||e[14]!==n||e[15]!==r){let le;e[17]!==s||e[18]!==n?(le=(h,S)=>t.jsxs(ot,{className:"hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[t.jsx(we,{children:S+1}),t.jsx(we,{className:"font-medium",children:h.member?.user?.name}),t.jsx(we,{children:h.plan?.name}),t.jsx(we,{children:new Date(h.start_date).toLocaleDateString()}),t.jsx(we,{children:new Date(h.end_date).toLocaleDateString()}),t.jsxs(we,{children:["₹",h.total_paid]}),t.jsx(we,{children:t.jsx(dt,{variant:"outline",className:h.payment_status==="paid"?"border-green-200 text-green-700 bg-green-50 dark:border-green-800 dark:text-green-400 dark:bg-green-950":h.payment_status==="pending"?"border-yellow-200 text-yellow-700 bg-yellow-50 dark:border-yellow-800 dark:text-yellow-400 dark:bg-yellow-950":"border-red-200 text-red-700 bg-red-50 dark:border-red-800 dark:text-red-400 dark:bg-red-950",children:h.payment_status})}),t.jsx(we,{children:t.jsx(dt,{variant:"outline",className:h.status==="active"?"border-green-200 text-green-700 bg-green-50 dark:border-green-800 dark:text-green-400 dark:bg-green-950":h.status==="expired"?"border-red-200 text-red-700 bg-red-50 dark:border-red-800 dark:text-red-400 dark:bg-red-950":"border-gray-200 text-gray-700 bg-gray-50 dark:border-gray-800 dark:text-gray-400 dark:bg-gray-950",children:h.status})}),(n||s)&&t.jsx(we,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[n&&t.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>n(h),children:t.jsx(Ct,{className:"h-4 w-4"})}),s&&t.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>s(h),children:t.jsx(Pt,{className:"h-4 w-4"})})]})})]},h.id),e[17]=s,e[18]=n,e[19]=le):le=e[19],c=r.map(le),e[13]=s,e[14]=n,e[15]=r,e[16]=c}else c=e[16];let u;e[20]!==c?(u=t.jsx(wt,{children:c}),e[20]=c,e[21]=u):u=e[21];let o;return e[22]!==Y||e[23]!==u?(o=t.jsxs(kt,{children:[Y,u]}),e[22]=Y,e[23]=u,e[24]=o):o=e[24],o}function It(p){const e=Xe.c(119),{open:r,onOpenChange:n,members:s,plans:_,trainers:j}=p,[m,f]=Fe.useState(!1);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=new Date().toISOString().split("T"),e[0]=g):g=e[0];let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y={member_id:"",plan_id:"",trainer_id:"",start_date:g[0],status:"pending",notes:"",payment_amount:"",payment_method:"cash",payment_type:"plan",payment_date:new Date().toISOString().split("T")[0]},e[1]=y):y=e[1];const{data:a,setData:l,post:i,processing:Y,errors:c,reset:u}=st(y);let o;e[2]!==n||e[3]!==i||e[4]!==u?(o=d=>{d.preventDefault(),i("/subscriptions",{onSuccess:()=>{u(),f(!1),n(!1),Ue.success("Subscription created successfully")},onError:Bt})},e[2]=n,e[3]=i,e[4]=u,e[5]=o):o=e[5];const le=o;let h;if(e[6]!==a.plan_id||e[7]!==_){let d;e[9]!==a.plan_id?(d=W=>W.id===parseInt(a.plan_id),e[9]=a.plan_id,e[10]=d):d=e[10],h=_.find(d),e[6]=a.plan_id,e[7]=_,e[8]=h}else h=e[8];const S=h;let ae;e[11]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(lt,{children:[t.jsx(at,{children:"Add New Subscription"}),t.jsx(it,{children:"Assign a plan to a member"})]}),e[11]=ae):ae=e[11];let xe;e[12]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(D,{htmlFor:"member_id",children:"Member *"}),e[12]=xe):xe=e[12];const ke=a.member_id;let F;e[13]!==l?(F=d=>l("member_id",d),e[13]=l,e[14]=F):F=e[14];let fe;e[15]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ye,{children:t.jsx(ve,{placeholder:"Select member"})}),e[15]=fe):fe=e[15];let T;e[16]!==s?(T=s.map(Ht),e[16]=s,e[17]=T):T=e[17];let A;e[18]!==T?(A=t.jsx(Se,{children:T}),e[18]=T,e[19]=A):A=e[19];let E;e[20]!==a.member_id||e[21]!==A||e[22]!==F?(E=t.jsxs(be,{value:ke,onValueChange:F,children:[fe,A]}),e[20]=a.member_id,e[21]=A,e[22]=F,e[23]=E):E=e[23];let pe;e[24]!==c.member_id?(pe=c.member_id&&t.jsx("p",{className:"text-sm text-destructive",children:c.member_id}),e[24]=c.member_id,e[25]=pe):pe=e[25];let M;e[26]!==E||e[27]!==pe?(M=t.jsxs("div",{className:"space-y-2",children:[xe,E,pe]}),e[26]=E,e[27]=pe,e[28]=M):M=e[28];let P;e[29]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(D,{htmlFor:"plan_id",children:"Plan *"}),e[29]=P):P=e[29];const Pe=a.plan_id;let ee;e[30]!==_||e[31]!==m||e[32]!==l?(ee=d=>{l("plan_id",d);const W=_.find(ue=>ue.id===parseInt(d));W&&m&&l("payment_amount",W.price.toString())},e[30]=_,e[31]=m,e[32]=l,e[33]=ee):ee=e[33];let _e;e[34]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(ye,{children:t.jsx(ve,{placeholder:"Select plan"})}),e[34]=_e):_e=e[34];let te;e[35]!==_?(te=_.map($t),e[35]=_,e[36]=te):te=e[36];let V;e[37]!==te?(V=t.jsx(Se,{children:te}),e[37]=te,e[38]=V):V=e[38];let se;e[39]!==a.plan_id||e[40]!==ee||e[41]!==V?(se=t.jsxs(be,{value:Pe,onValueChange:ee,children:[_e,V]}),e[39]=a.plan_id,e[40]=ee,e[41]=V,e[42]=se):se=e[42];let I;e[43]!==c.plan_id?(I=c.plan_id&&t.jsx("p",{className:"text-sm text-destructive",children:c.plan_id}),e[43]=c.plan_id,e[44]=I):I=e[44];let O;e[45]!==se||e[46]!==I?(O=t.jsxs("div",{className:"space-y-2",children:[P,se,I]}),e[45]=se,e[46]=I,e[47]=O):O=e[47];let $;e[48]!==a.trainer_id||e[49]!==c.trainer_id||e[50]!==S?.personal_training||e[51]!==l||e[52]!==j?($=S?.personal_training&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(D,{htmlFor:"trainer_id",children:"Assign Trainer"}),t.jsxs(be,{value:a.trainer_id,onValueChange:d=>l("trainer_id",d),children:[t.jsx(ye,{children:t.jsx(ve,{placeholder:"Select trainer"})}),t.jsx(Se,{children:j.map(Ot)})]}),c.trainer_id&&t.jsx("p",{className:"text-sm text-destructive",children:c.trainer_id})]}),e[48]=a.trainer_id,e[49]=c.trainer_id,e[50]=S?.personal_training,e[51]=l,e[52]=j,e[53]=$):$=e[53];let H;e[54]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(D,{htmlFor:"start_date",children:"Start Date *"}),e[54]=H):H=e[54];let B;e[55]!==l?(B=d=>l("start_date",d.target.value),e[55]=l,e[56]=B):B=e[56];let N;e[57]!==a.start_date||e[58]!==B?(N=t.jsx(Te,{id:"start_date",type:"date",value:a.start_date,onChange:B}),e[57]=a.start_date,e[58]=B,e[59]=N):N=e[59];let L;e[60]!==c.start_date?(L=c.start_date&&t.jsx("p",{className:"text-sm text-destructive",children:c.start_date}),e[60]=c.start_date,e[61]=L):L=e[61];let z;e[62]!==N||e[63]!==L?(z=t.jsxs("div",{className:"space-y-2",children:[H,N,L]}),e[62]=N,e[63]=L,e[64]=z):z=e[64];let ie;e[65]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(D,{htmlFor:"status",children:"Status *"}),e[65]=ie):ie=e[65];let C;e[66]!==l?(C=d=>l("status",d),e[66]=l,e[67]=C):C=e[67];let R;e[68]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(ye,{children:t.jsx(ve,{})}),e[68]=R):R=e[68];let ne;e[69]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs(Se,{children:[t.jsx(x,{value:"pending",children:"Pending"}),t.jsx(x,{value:"active",children:"Active"}),t.jsx(x,{value:"expired",children:"Expired"}),t.jsx(x,{value:"cancelled",children:"Cancelled"})]}),e[69]=ne):ne=e[69];let U;e[70]!==a.status||e[71]!==C?(U=t.jsxs("div",{className:"space-y-2",children:[ie,t.jsxs(be,{value:a.status,onValueChange:C,children:[R,ne]})]}),e[70]=a.status,e[71]=C,e[72]=U):U=e[72];let q;e[73]!==S?(q=S&&t.jsx("div",{className:"space-y-2 col-span-2",children:t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",S.duration_months," month(s) | Plan Fee: ₹",S.price," | Admission Fee: ₹",S.admission_fee||0]})}),e[73]=S,e[74]=q):q=e[74];let re;e[75]===Symbol.for("react.memo_cache_sentinel")?(re=d=>f(d),e[75]=re):re=e[75];let X;e[76]!==m?(X=t.jsx(Dt,{id:"record_payment",checked:m,onCheckedChange:re}),e[76]=m,e[77]=X):X=e[77];let ce;e[78]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(D,{htmlFor:"record_payment",className:"cursor-pointer",children:"Record payment now"}),e[78]=ce):ce=e[78];let G;e[79]!==X?(G=t.jsx("div",{className:"space-y-2 col-span-2",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[X,ce]})}),e[79]=X,e[80]=G):G=e[80];let de;e[81]!==a.payment_amount||e[82]!==a.payment_date||e[83]!==a.payment_method||e[84]!==a.payment_type||e[85]!==m||e[86]!==l?(de=m&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(D,{htmlFor:"payment_amount",children:"Payment Amount *"}),t.jsx(Te,{id:"payment_amount",type:"number",step:"0.01",value:a.payment_amount,onChange:d=>l("payment_amount",d.target.value),placeholder:"0.00"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(D,{htmlFor:"payment_method",children:"Payment Method *"}),t.jsxs(be,{value:a.payment_method,onValueChange:d=>l("payment_method",d),children:[t.jsx(ye,{children:t.jsx(ve,{})}),t.jsxs(Se,{children:[t.jsx(x,{value:"cash",children:"Cash"}),t.jsx(x,{value:"card",children:"Card"}),t.jsx(x,{value:"upi",children:"UPI"}),t.jsx(x,{value:"bank_transfer",children:"Bank Transfer"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(D,{htmlFor:"payment_type",children:"Payment Type *"}),t.jsxs(be,{value:a.payment_type,onValueChange:d=>l("payment_type",d),children:[t.jsx(ye,{children:t.jsx(ve,{})}),t.jsxs(Se,{children:[t.jsx(x,{value:"plan",children:"Plan Fee"}),t.jsx(x,{value:"admission",children:"Admission Fee"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(D,{htmlFor:"payment_date",children:"Payment Date *"}),t.jsx(Te,{id:"payment_date",type:"date",value:a.payment_date,onChange:d=>l("payment_date",d.target.value)})]})]}),e[81]=a.payment_amount,e[82]=a.payment_date,e[83]=a.payment_method,e[84]=a.payment_type,e[85]=m,e[86]=l,e[87]=de):de=e[87];let oe;e[88]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(D,{htmlFor:"notes",children:"Notes"}),e[88]=oe):oe=e[88];let Z;e[89]!==l?(Z=d=>l("notes",d.target.value),e[89]=l,e[90]=Z):Z=e[90];let J;e[91]!==a.notes||e[92]!==Z?(J=t.jsxs("div",{className:"space-y-2 col-span-2",children:[oe,t.jsx(pt,{id:"notes",value:a.notes,onChange:Z,placeholder:"Optional notes..."})]}),e[91]=a.notes,e[92]=Z,e[93]=J):J=e[93];let me;e[94]!==M||e[95]!==O||e[96]!==$||e[97]!==z||e[98]!==U||e[99]!==q||e[100]!==G||e[101]!==de||e[102]!==J?(me=t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4",children:[M,O,$,z,U,q,G,de,J]}),e[94]=M,e[95]=O,e[96]=$,e[97]=z,e[98]=U,e[99]=q,e[100]=G,e[101]=de,e[102]=J,e[103]=me):me=e[103];let K;e[104]!==n?(K=t.jsx(Ne,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e[104]=n,e[105]=K):K=e[105];let w;e[106]!==Y?(w=t.jsx(Ne,{type:"submit",disabled:Y,children:"Create Subscription"}),e[106]=Y,e[107]=w):w=e[107];let Q;e[108]!==K||e[109]!==w?(Q=t.jsxs(nt,{children:[K,w]}),e[108]=K,e[109]=w,e[110]=Q):Q=e[110];let k;e[111]!==le||e[112]!==me||e[113]!==Q?(k=t.jsxs(rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[ae,t.jsxs("form",{onSubmit:le,children:[me,Q]})]}),e[111]=le,e[112]=me,e[113]=Q,e[114]=k):k=e[114];let he;return e[115]!==n||e[116]!==r||e[117]!==k?(he=t.jsx(ct,{open:r,onOpenChange:n,children:k}),e[115]=n,e[116]=r,e[117]=k,e[118]=he):he=e[118],he}function Ot(p){return t.jsx(x,{value:p.id.toString(),children:p.user?.name},p.id)}function $t(p){return t.jsxs(x,{value:p.id.toString(),children:[p.name," - ₹",p.price]},p.id)}function Ht(p){return t.jsx(x,{value:p.id.toString(),children:p.user?.name||"Unknown"},p.id)}function Bt(){Ue.error("Failed to create subscription")}function Lt(p){const e=Xe.c(140),{open:r,onOpenChange:n,subscription:s,members:_,plans:j}=p;let m;e[0]!==s.member_id?(m=s.member_id.toString(),e[0]=s.member_id,e[1]=m):m=e[1];let f;e[2]!==s.plan_id?(f=s.plan_id.toString(),e[2]=s.plan_id,e[3]=f):f=e[3];let g;e[4]!==s.start_date?(g=s.start_date.split("T"),e[4]=s.start_date,e[5]=g):g=e[5];const y=s.notes||"";let a;e[6]!==s.admission_fee_paid||e[7]!==s.amount_paid||e[8]!==s.payment_status||e[9]!==s.status||e[10]!==m||e[11]!==f||e[12]!==g[0]||e[13]!==y?(a={member_id:m,plan_id:f,start_date:g[0],amount_paid:s.amount_paid,admission_fee_paid:s.admission_fee_paid,payment_status:s.payment_status,status:s.status,notes:y},e[6]=s.admission_fee_paid,e[7]=s.amount_paid,e[8]=s.payment_status,e[9]=s.status,e[10]=m,e[11]=f,e[12]=g[0],e[13]=y,e[14]=a):a=e[14];const{data:l,setData:i,put:Y,processing:c,errors:u}=st(a);let o;e[15]!==i||e[16]!==s.admission_fee_paid||e[17]!==s.amount_paid||e[18]!==s.member_id||e[19]!==s.notes||e[20]!==s.payment_status||e[21]!==s.plan_id||e[22]!==s.start_date||e[23]!==s.status?(o=()=>{i({member_id:s.member_id.toString(),plan_id:s.plan_id.toString(),start_date:s.start_date.split("T")[0],amount_paid:s.amount_paid,admission_fee_paid:s.admission_fee_paid,payment_status:s.payment_status,status:s.status,notes:s.notes||""})},e[15]=i,e[16]=s.admission_fee_paid,e[17]=s.amount_paid,e[18]=s.member_id,e[19]=s.notes,e[20]=s.payment_status,e[21]=s.plan_id,e[22]=s.start_date,e[23]=s.status,e[24]=o):o=e[24];let le;e[25]!==s?(le=[s],e[25]=s,e[26]=le):le=e[26],Fe.useEffect(o,le);let h;e[27]!==n||e[28]!==Y||e[29]!==s.id?(h=b=>{b.preventDefault(),Y(`/subscriptions/${s.id}`,{onSuccess:()=>{n(!1),Ue.success("Subscription updated successfully")},onError:Ut})},e[27]=n,e[28]=Y,e[29]=s.id,e[30]=h):h=e[30];const S=h;let ae;e[31]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(lt,{children:[t.jsx(at,{children:"Edit Subscription"}),t.jsx(it,{children:"Update subscription details"})]}),e[31]=ae):ae=e[31];let xe;e[32]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(D,{htmlFor:"member_id",children:"Member *"}),e[32]=xe):xe=e[32];const ke=l.member_id;let F;e[33]!==i?(F=b=>i("member_id",b),e[33]=i,e[34]=F):F=e[34];let fe;e[35]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ye,{children:t.jsx(ve,{})}),e[35]=fe):fe=e[35];let T;e[36]!==_?(T=_.map(Rt),e[36]=_,e[37]=T):T=e[37];let A;e[38]!==T?(A=t.jsx(Se,{children:T}),e[38]=T,e[39]=A):A=e[39];let E;e[40]!==l.member_id||e[41]!==F||e[42]!==A?(E=t.jsxs(be,{value:ke,onValueChange:F,children:[fe,A]}),e[40]=l.member_id,e[41]=F,e[42]=A,e[43]=E):E=e[43];let pe;e[44]!==u.member_id?(pe=u.member_id&&t.jsx("p",{className:"text-sm text-destructive",children:u.member_id}),e[44]=u.member_id,e[45]=pe):pe=e[45];let M;e[46]!==E||e[47]!==pe?(M=t.jsxs("div",{className:"space-y-2",children:[xe,E,pe]}),e[46]=E,e[47]=pe,e[48]=M):M=e[48];let P;e[49]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(D,{htmlFor:"plan_id",children:"Plan *"}),e[49]=P):P=e[49];const Pe=l.plan_id;let ee;e[50]!==i?(ee=b=>i("plan_id",b),e[50]=i,e[51]=ee):ee=e[51];let _e;e[52]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(ye,{children:t.jsx(ve,{})}),e[52]=_e):_e=e[52];let te;e[53]!==j?(te=j.map(zt),e[53]=j,e[54]=te):te=e[54];let V;e[55]!==te?(V=t.jsx(Se,{children:te}),e[55]=te,e[56]=V):V=e[56];let se;e[57]!==l.plan_id||e[58]!==ee||e[59]!==V?(se=t.jsxs(be,{value:Pe,onValueChange:ee,children:[_e,V]}),e[57]=l.plan_id,e[58]=ee,e[59]=V,e[60]=se):se=e[60];let I;e[61]!==u.plan_id?(I=u.plan_id&&t.jsx("p",{className:"text-sm text-destructive",children:u.plan_id}),e[61]=u.plan_id,e[62]=I):I=e[62];let O;e[63]!==se||e[64]!==I?(O=t.jsxs("div",{className:"space-y-2",children:[P,se,I]}),e[63]=se,e[64]=I,e[65]=O):O=e[65];let $;e[66]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(D,{htmlFor:"start_date",children:"Start Date *"}),e[66]=$):$=e[66];let H;e[67]!==i?(H=b=>i("start_date",b.target.value),e[67]=i,e[68]=H):H=e[68];let B;e[69]!==l.start_date||e[70]!==H?(B=t.jsx(Te,{id:"start_date",type:"date",value:l.start_date,onChange:H}),e[69]=l.start_date,e[70]=H,e[71]=B):B=e[71];let N;e[72]!==u.start_date?(N=u.start_date&&t.jsx("p",{className:"text-sm text-destructive",children:u.start_date}),e[72]=u.start_date,e[73]=N):N=e[73];let L;e[74]!==B||e[75]!==N?(L=t.jsxs("div",{className:"space-y-2",children:[$,B,N]}),e[74]=B,e[75]=N,e[76]=L):L=e[76];let z;e[77]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(D,{htmlFor:"amount_paid",children:"Amount Paid *"}),e[77]=z):z=e[77];let ie;e[78]!==i?(ie=b=>i("amount_paid",b.target.value),e[78]=i,e[79]=ie):ie=e[79];let C;e[80]!==l.amount_paid||e[81]!==ie?(C=t.jsx(Te,{id:"amount_paid",type:"number",step:"0.01",value:l.amount_paid,onChange:ie}),e[80]=l.amount_paid,e[81]=ie,e[82]=C):C=e[82];let R;e[83]!==u.amount_paid?(R=u.amount_paid&&t.jsx("p",{className:"text-sm text-destructive",children:u.amount_paid}),e[83]=u.amount_paid,e[84]=R):R=e[84];let ne;e[85]!==C||e[86]!==R?(ne=t.jsxs("div",{className:"space-y-2",children:[z,C,R]}),e[85]=C,e[86]=R,e[87]=ne):ne=e[87];let U;e[88]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(D,{htmlFor:"admission_fee_paid",children:"Admission Fee"}),e[88]=U):U=e[88];let q;e[89]!==i?(q=b=>i("admission_fee_paid",b.target.value),e[89]=i,e[90]=q):q=e[90];let re;e[91]!==l.admission_fee_paid||e[92]!==q?(re=t.jsxs("div",{className:"space-y-2",children:[U,t.jsx(Te,{id:"admission_fee_paid",type:"number",step:"0.01",value:l.admission_fee_paid,onChange:q})]}),e[91]=l.admission_fee_paid,e[92]=q,e[93]=re):re=e[93];let X;e[94]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(D,{htmlFor:"payment_status",children:"Payment Status *"}),e[94]=X):X=e[94];let ce;e[95]!==i?(ce=b=>i("payment_status",b),e[95]=i,e[96]=ce):ce=e[96];let G;e[97]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(ye,{children:t.jsx(ve,{})}),e[97]=G):G=e[97];let de;e[98]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsxs(Se,{children:[t.jsx(x,{value:"pending",children:"Pending"}),t.jsx(x,{value:"paid",children:"Paid"}),t.jsx(x,{value:"overdue",children:"Overdue"})]}),e[98]=de):de=e[98];let oe;e[99]!==l.payment_status||e[100]!==ce?(oe=t.jsxs("div",{className:"space-y-2",children:[X,t.jsxs(be,{value:l.payment_status,onValueChange:ce,children:[G,de]})]}),e[99]=l.payment_status,e[100]=ce,e[101]=oe):oe=e[101];let Z;e[102]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(D,{htmlFor:"status",children:"Status *"}),e[102]=Z):Z=e[102];let J;e[103]!==i?(J=b=>i("status",b),e[103]=i,e[104]=J):J=e[104];let me;e[105]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(ye,{children:t.jsx(ve,{})}),e[105]=me):me=e[105];let K;e[106]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsxs(Se,{children:[t.jsx(x,{value:"active",children:"Active"}),t.jsx(x,{value:"expired",children:"Expired"}),t.jsx(x,{value:"cancelled",children:"Cancelled"})]}),e[106]=K):K=e[106];let w;e[107]!==l.status||e[108]!==J?(w=t.jsxs("div",{className:"space-y-2",children:[Z,t.jsxs(be,{value:l.status,onValueChange:J,children:[me,K]})]}),e[107]=l.status,e[108]=J,e[109]=w):w=e[109];let Q;e[110]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(D,{htmlFor:"notes",children:"Notes"}),e[110]=Q):Q=e[110];let k;e[111]!==i?(k=b=>i("notes",b.target.value),e[111]=i,e[112]=k):k=e[112];let he;e[113]!==l.notes||e[114]!==k?(he=t.jsxs("div",{className:"space-y-2 col-span-2",children:[Q,t.jsx(pt,{id:"notes",value:l.notes,onChange:k})]}),e[113]=l.notes,e[114]=k,e[115]=he):he=e[115];let d;e[116]!==M||e[117]!==O||e[118]!==L||e[119]!==ne||e[120]!==re||e[121]!==oe||e[122]!==w||e[123]!==he?(d=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[M,O,L,ne,re,oe,w,he]}),e[116]=M,e[117]=O,e[118]=L,e[119]=ne,e[120]=re,e[121]=oe,e[122]=w,e[123]=he,e[124]=d):d=e[124];let W;e[125]!==n?(W=t.jsx(Ne,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e[125]=n,e[126]=W):W=e[126];let ue;e[127]!==c?(ue=t.jsx(Ne,{type:"submit",disabled:c,children:"Update"}),e[127]=c,e[128]=ue):ue=e[128];let je;e[129]!==W||e[130]!==ue?(je=t.jsxs(nt,{children:[W,ue]}),e[129]=W,e[130]=ue,e[131]=je):je=e[131];let ge;e[132]!==S||e[133]!==d||e[134]!==je?(ge=t.jsxs(rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[ae,t.jsxs("form",{onSubmit:S,children:[d,je]})]}),e[132]=S,e[133]=d,e[134]=je,e[135]=ge):ge=e[135];let De;return e[136]!==n||e[137]!==r||e[138]!==ge?(De=t.jsx(ct,{open:r,onOpenChange:n,children:ge}),e[136]=n,e[137]=r,e[138]=ge,e[139]=De):De=e[139],De}function zt(p){return t.jsxs(x,{value:p.id.toString(),children:[p.name," - ₹",p.price]},p.id)}function Rt(p){return t.jsx(x,{value:p.id.toString(),children:p.user?.name||"Unknown"},p.id)}function Ut(){Ue.error("Failed to update subscription")}function qt(p){const e=Xe.c(17),{open:r,onOpenChange:n,subscription:s}=p,{delete:_,processing:j}=st();let m;e[0]!==_||e[1]!==n||e[2]!==s.id?(m=()=>{_(`/subscriptions/${s.id}`,{onSuccess:()=>{n(!1),Ue.success("Subscription deleted successfully")},onError:Xt})},e[0]=_,e[1]=n,e[2]=s.id,e[3]=m):m=e[3];const f=m;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs(lt,{children:[t.jsx(at,{children:"Delete Subscription"}),t.jsx(it,{children:"Are you sure you want to delete this subscription? This action cannot be undone."})]}),e[4]=g):g=e[4];let y;e[5]!==n?(y=t.jsx(Ne,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e[5]=n,e[6]=y):y=e[6];let a;e[7]!==f||e[8]!==j?(a=t.jsx(Ne,{variant:"destructive",onClick:f,disabled:j,children:"Delete"}),e[7]=f,e[8]=j,e[9]=a):a=e[9];let l;e[10]!==y||e[11]!==a?(l=t.jsxs(rt,{children:[g,t.jsxs(nt,{children:[y,a]})]}),e[10]=y,e[11]=a,e[12]=l):l=e[12];let i;return e[13]!==n||e[14]!==r||e[15]!==l?(i=t.jsx(ct,{open:r,onOpenChange:n,children:l}),e[13]=n,e[14]=r,e[15]=l,e[16]=i):i=e[16],i}function Xt(){Ue.error("Failed to delete subscription")}function ys(p){const e=Xe.c(136),{subscriptions:r,members:n,plans:s,trainers:_,stats:j,filters:m,auth:f}=p,[g,y]=Fe.useState(!1),[a,l]=Fe.useState(null),[i,Y]=Fe.useState(null),[c,u]=Fe.useState(m.search||""),[o,le]=Fe.useState(m.status||"all"),[h]=xt(c,500);let S;e[0]!==f.permissions?(S=f.permissions.includes("create_subscriptions"),e[0]=f.permissions,e[1]=S):S=e[1];const ae=S;let xe;e[2]!==f.permissions?(xe=f.permissions.includes("edit_subscriptions"),e[2]=f.permissions,e[3]=xe):xe=e[3];const ke=xe;let F;e[4]!==f.permissions?(F=f.permissions.includes("delete_subscriptions"),e[4]=f.permissions,e[5]=F):F=e[5];const fe=F;let T;e[6]!==h||e[7]!==m.per_page||e[8]!==o?(T=()=>{We.get("/subscriptions",{search:h||void 0,status:o!=="all"?o:void 0,per_page:m.per_page},{preserveState:!0,preserveScroll:!0})},e[6]=h,e[7]=m.per_page,e[8]=o,e[9]=T):T=e[9];let A;e[10]!==h||e[11]!==o?(A=[h,o],e[10]=h,e[11]=o,e[12]=A):A=e[12],Fe.useEffect(T,A);let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{u(""),le("all")},e[13]=E):E=e[13];const pe=E;let M;e[14]!==m.per_page||e[15]!==c||e[16]!==o?(M=v=>{We.get("/subscriptions",{page:v,search:c||void 0,status:o!=="all"?o:void 0,per_page:m.per_page},{preserveState:!0})},e[14]=m.per_page,e[15]=c,e[16]=o,e[17]=M):M=e[17];const P=M;let Pe;e[18]!==c||e[19]!==o?(Pe=v=>{We.get("/subscriptions",{search:c||void 0,status:o!=="all"?o:void 0,per_page:v},{preserveState:!0})},e[18]=c,e[19]=o,e[20]=Pe):Pe=e[20];const ee=Pe,_e=(r.current_page-1)*r.per_page+1,te=Math.min(r.current_page*r.per_page,r.total);let V;e[21]!==r?(V=()=>{const v=[],{current_page:Re,last_page:qe}=r;if(qe<=7)return Array.from({length:qe},Gt);v.push(1),Re>3&&v.push("...");for(let Qe=Math.max(2,Re-1);Qe<=Math.min(qe-1,Re+1);Qe++)v.push(Qe);return Re<qe-2&&v.push("..."),v.push(qe),v},e[21]=r,e[22]=V):V=e[22];const se=V;let I;e[23]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(ut,{title:"Subscriptions"}),e[23]=I):I=e[23];let O;e[24]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Subscriptions"}),t.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Manage member subscriptions"})]}),e[24]=O):O=e[24];let $;e[25]!==ae?($=ae&&t.jsxs(Ne,{onClick:()=>y(!0),className:"w-full md:w-auto",children:[t.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Subscription"]}),e[25]=ae,e[26]=$):$=e[26];let H;e[27]!==$?(H=t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[O,$]}),e[27]=$,e[28]=H):H=e[28];let B;e[29]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(tt,{className:"text-sm font-medium",children:"Total Subscriptions"}),t.jsx(mt,{className:"h-4 w-4 text-muted-foreground"})]}),e[29]=B):B=e[29];let N;e[30]!==j.total?(N=t.jsxs(Ze,{children:[B,t.jsx(Je,{children:t.jsx("div",{className:"text-2xl font-bold",children:j.total})})]}),e[30]=j.total,e[31]=N):N=e[31];let L;e[32]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(tt,{className:"text-sm font-medium",children:"Active Subscriptions"}),t.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"})]}),e[32]=L):L=e[32];let z;e[33]!==j.active?(z=t.jsxs(Ze,{children:[L,t.jsx(Je,{children:t.jsx("div",{className:"text-2xl font-bold",children:j.active})})]}),e[33]=j.active,e[34]=z):z=e[34];let ie;e[35]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(tt,{className:"text-sm font-medium",children:"Expired Subscriptions"}),t.jsx(At,{className:"h-4 w-4 text-muted-foreground"})]}),e[35]=ie):ie=e[35];let C;e[36]!==j.expired?(C=t.jsxs(Ze,{children:[ie,t.jsx(Je,{children:t.jsx("div",{className:"text-2xl font-bold",children:j.expired})})]}),e[36]=j.expired,e[37]=C):C=e[37];let R;e[38]!==N||e[39]!==z||e[40]!==C?(R=t.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[N,z,C]}),e[38]=N,e[39]=z,e[40]=C,e[41]=R):R=e[41];let ne;e[42]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Show"}),e[42]=ne):ne=e[42];let U;e[43]!==m.per_page?(U=m.per_page.toString(),e[43]=m.per_page,e[44]=U):U=e[44];let q;e[45]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(ye,{className:"w-20",children:t.jsx(ve,{})}),e[45]=q):q=e[45];let re;e[46]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsxs(Se,{children:[t.jsx(x,{value:"10",children:"10"}),t.jsx(x,{value:"25",children:"25"}),t.jsx(x,{value:"50",children:"50"}),t.jsx(x,{value:"100",children:"100"})]}),e[46]=re):re=e[46];let X;e[47]!==ee||e[48]!==U?(X=t.jsxs(be,{value:U,onValueChange:ee,children:[q,re]}),e[47]=ee,e[48]=U,e[49]=X):X=e[49];let ce;e[50]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"entries"}),e[50]=ce):ce=e[50];let G;e[51]!==X?(G=t.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[ne,X,ce]})}),e[51]=X,e[52]=G):G=e[52];let de;e[53]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(jt,{className:"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[53]=de):de=e[53];let oe;e[54]===Symbol.for("react.memo_cache_sentinel")?(oe=v=>u(v.target.value),e[54]=oe):oe=e[54];let Z;e[55]!==c?(Z=t.jsxs("div",{className:"relative flex-1",children:[de,t.jsx(Te,{placeholder:"Search subscriptions...",value:c,onChange:oe,className:"pl-8 h-9"})]}),e[55]=c,e[56]=Z):Z=e[56];let J;e[57]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(ye,{className:"w-full sm:w-40 h-9",children:t.jsx(ve,{placeholder:"Status"})}),e[57]=J):J=e[57];let me;e[58]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsxs(Se,{children:[t.jsx(x,{value:"all",children:"All Status"}),t.jsx(x,{value:"active",children:"Active"}),t.jsx(x,{value:"pending",children:"Pending"}),t.jsx(x,{value:"expired",children:"Expired"}),t.jsx(x,{value:"cancelled",children:"Cancelled"})]}),e[58]=me):me=e[58];let K;e[59]!==o?(K=t.jsxs(be,{value:o,onValueChange:le,children:[J,me]}),e[59]=o,e[60]=K):K=e[60];let w;e[61]!==c||e[62]!==o?(w=(c||o!=="all")&&t.jsx(Ne,{variant:"ghost",size:"sm",onClick:pe,className:"w-full sm:w-auto",children:t.jsx(Et,{className:"h-4 w-4"})}),e[61]=c,e[62]=o,e[63]=w):w=e[63];let Q;e[64]!==Z||e[65]!==K||e[66]!==w?(Q=t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[Z,K,w]}),e[64]=Z,e[65]=K,e[66]=w,e[67]=Q):Q=e[67];let k;e[68]!==G||e[69]!==Q?(k=t.jsxs("div",{className:"space-y-4",children:[G,Q]}),e[68]=G,e[69]=Q,e[70]=k):k=e[70];const he=ke?l:void 0,d=fe?Y:void 0;let W;e[71]!==r.data||e[72]!==he||e[73]!==d?(W=t.jsx("div",{className:"overflow-x-auto",children:t.jsx(Vt,{subscriptions:r.data,onEdit:he,onDelete:d})}),e[71]=r.data,e[72]=he,e[73]=d,e[74]=W):W=e[74];let ue;e[75]!==c||e[76]!==o||e[77]!==r.data.length?(ue=r.data.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(mt,{className:"mx-auto h-12 w-12 text-muted-foreground"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No subscriptions found"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:c||o!=="all"?"Try adjusting your filters":"Get started by adding a new subscription"})]}),e[75]=c,e[76]=o,e[77]=r.data.length,e[78]=ue):ue=e[78];let je;e[79]!==te||e[80]!==_e||e[81]!==r.total?(je=t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",_e," to ",te," of ",r.total," results"]}),e[79]=te,e[80]=_e,e[81]=r.total,e[82]=je):je=e[82];let ge;e[83]!==P||e[84]!==r.current_page?(ge=()=>P(r.current_page-1),e[83]=P,e[84]=r.current_page,e[85]=ge):ge=e[85];const De=r.current_page===1?"pointer-events-none opacity-50":"cursor-pointer";let b;e[86]!==ge||e[87]!==De?(b=t.jsx(Ye,{children:t.jsx(gt,{onClick:ge,className:De})}),e[86]=ge,e[87]=De,e[88]=b):b=e[88];let Ae;e[89]!==se?(Ae=se(),e[89]=se,e[90]=Ae):Ae=e[90];let Ee;e[91]!==P||e[92]!==r.current_page||e[93]!==Ae?(Ee=Ae.map((v,Re)=>t.jsx(Ye,{children:v==="..."?t.jsx(ft,{}):t.jsx(_t,{onClick:()=>P(v),isActive:v===r.current_page,className:"cursor-pointer",children:v})},Re)),e[91]=P,e[92]=r.current_page,e[93]=Ae,e[94]=Ee):Ee=e[94];let Me;e[95]!==P||e[96]!==r.current_page?(Me=()=>P(r.current_page+1),e[95]=P,e[96]=r.current_page,e[97]=Me):Me=e[97];const Ke=r.current_page===r.last_page?"pointer-events-none opacity-50":"cursor-pointer";let Ve;e[98]!==Me||e[99]!==Ke?(Ve=t.jsx(Ye,{children:t.jsx(bt,{onClick:Me,className:Ke})}),e[98]=Me,e[99]=Ke,e[100]=Ve):Ve=e[100];let Ie;e[101]!==b||e[102]!==Ee||e[103]!==Ve?(Ie=t.jsx("div",{className:"overflow-x-auto",children:t.jsx(yt,{children:t.jsxs(vt,{children:[b,Ee,Ve]})})}),e[101]=b,e[102]=Ee,e[103]=Ve,e[104]=Ie):Ie=e[104];let Oe;e[105]!==je||e[106]!==Ie?(Oe=t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4",children:[je,Ie]}),e[105]=je,e[106]=Ie,e[107]=Oe):Oe=e[107];let $e;e[108]!==k||e[109]!==W||e[110]!==ue||e[111]!==Oe?($e=t.jsx(Ze,{children:t.jsxs(Je,{className:"pt-6 space-y-4",children:[k,W,ue,Oe]})}),e[108]=k,e[109]=W,e[110]=ue,e[111]=Oe,e[112]=$e):$e=e[112];let He;e[113]!==H||e[114]!==R||e[115]!==$e?(He=t.jsxs("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[H,R,$e]}),e[113]=H,e[114]=R,e[115]=$e,e[116]=He):He=e[116];let Be;e[117]!==ae||e[118]!==g||e[119]!==n||e[120]!==s||e[121]!==_?(Be=ae&&t.jsx(It,{open:g,onOpenChange:y,members:n,plans:s,trainers:_}),e[117]=ae,e[118]=g,e[119]=n,e[120]=s,e[121]=_,e[122]=Be):Be=e[122];let Le;e[123]!==ke||e[124]!==a||e[125]!==n||e[126]!==s?(Le=ke&&a&&t.jsx(Lt,{open:!!a,onOpenChange:v=>!v&&l(null),subscription:a,members:n,plans:s}),e[123]=ke,e[124]=a,e[125]=n,e[126]=s,e[127]=Le):Le=e[127];let ze;e[128]!==fe||e[129]!==i?(ze=fe&&i&&t.jsx(qt,{open:!!i,onOpenChange:v=>!v&&Y(null),subscription:i}),e[128]=fe,e[129]=i,e[130]=ze):ze=e[130];let Ge;return e[131]!==He||e[132]!==Be||e[133]!==Le||e[134]!==ze?(Ge=t.jsxs(St,{children:[I,He,Be,Le,ze]}),e[131]=He,e[132]=Be,e[133]=Le,e[134]=ze,e[135]=Ge):Ge=e[135],Ge}function Gt(p,e){return e+1}export{ys as default};
