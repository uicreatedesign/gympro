import{c as _e,j as t,u as Se,t as ye,r as ge,a as Ee,H as Me,b as Oe}from"./app-cNXeGScd.js";import{A as $e}from"./app-layout-BuBPLU6c.js";import{b as Ie,c as Ae}from"./card-Bv1eHmK_.js";import{e as Re,f as Ve,P as ve,c as Be,a as He,b as Le,d as ze}from"./pagination-6GfLuM88.js";import{B as ne}from"./app-logo-icon-BVEFLWIi.js";import{B as Ue}from"./badge-CTypo_Ez.js";import{c as qe,T as Fe,b as he,a as pe,P as Ge,e as Je,d as Ke}from"./table-DegWvFIo.js";import{D as Qe}from"./download-K4J3OjWT.js";import{T as We}from"./trash-2-BIELk7Pf.js";import{D as Ce,a as Ne,b as Pe,c as De,d as ke,e as we}from"./dialog-CANFBbDG.js";import{I as je}from"./input-B6ChAk_-.js";import{L as I}from"./label-nzuE_3dg.js";import{T as Te}from"./textarea-mjba4PeB.js";import{c as oe,S as ce,a as me,b as de,d}from"./select-B_vkAFMk.js";/* empty css            */import"./app-sidebar-layout-Bojxd45Y.js";import"./index-DAn-omQv.js";import"./index-Cmw99ND_.js";import"./index-Cx2XN_pX.js";import"./chevron-left-BV5dFIG8.js";import"./index-Be5GoQ22.js";import"./chevron-down-Bl9OOBa4.js";import"./check-Cxb3bKHS.js";function Xe(b){const e=_e.c(10),{payments:i,onEdit:a,onDelete:l}=b,g=Ye;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(qe,{children:t.jsxs(Fe,{children:[t.jsx(he,{className:"w-16",children:"Sr No"}),t.jsx(he,{children:"Invoice #"}),t.jsx(he,{children:"Member"}),t.jsx(he,{children:"Amount"}),t.jsx(he,{children:"Method"}),t.jsx(he,{children:"Date"}),t.jsx(he,{children:"Status"}),t.jsx(he,{className:"text-right",children:"Actions"})]})}),e[0]=n):n=e[0];let s;if(e[1]!==l||e[2]!==a||e[3]!==i){let h;e[5]!==l||e[6]!==a?(h=(o,c)=>t.jsxs(Fe,{className:"hover:bg-gray-50 dark:hover:bg-[oklch(0.269_0_0)]",children:[t.jsx(pe,{children:c+1}),t.jsx(pe,{className:"font-medium",children:o.invoice_number}),t.jsx(pe,{children:o.member?.user?.name}),t.jsxs(pe,{children:["â‚¹",o.amount]}),t.jsx(pe,{className:"capitalize",children:o.payment_method}),t.jsx(pe,{children:new Date(o.payment_date).toLocaleDateString()}),t.jsx(pe,{children:t.jsx(Ue,{variant:"outline",className:o.status==="completed"?"border-green-200 text-green-700 bg-green-50 dark:border-green-800 dark:text-green-400 dark:bg-green-950":o.status==="pending"?"border-yellow-200 text-yellow-700 bg-yellow-50 dark:border-yellow-800 dark:text-yellow-400 dark:bg-yellow-950":o.status==="failed"?"border-red-200 text-red-700 bg-red-50 dark:border-red-800 dark:text-red-400 dark:bg-red-950":"border-gray-200 text-gray-700 bg-gray-50 dark:border-gray-800 dark:text-gray-400 dark:bg-gray-950",children:o.status})}),t.jsx(pe,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(ne,{variant:"outline",size:"sm",onClick:()=>g(o),children:t.jsx(Qe,{className:"h-4 w-4"})}),a&&t.jsx(ne,{variant:"outline",size:"sm",onClick:()=>a(o),children:t.jsx(Ge,{className:"h-4 w-4"})}),l&&t.jsx(ne,{variant:"outline",size:"sm",onClick:()=>l(o),children:t.jsx(We,{className:"h-4 w-4"})})]})})]},o.id),e[5]=l,e[6]=a,e[7]=h):h=e[7],s=i.map(h),e[1]=l,e[2]=a,e[3]=i,e[4]=s}else s=e[4];let r;return e[8]!==s?(r=t.jsxs(Je,{children:[n,t.jsx(Ke,{children:s})]}),e[8]=s,e[9]=r):r=e[9],r}function Ye(b){window.open(`/payments/${b.id}/invoice`,"_blank")}function Ze(b){const e=_e.c(94),{open:i,onOpenChange:a,subscriptions:l}=b;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=new Date().toISOString().split("T"),e[0]=g):g=e[0];let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={subscription_id:"",amount:"",payment_method:"cash",payment_type:"plan",payment_date:g[0],status:"completed",notes:""},e[1]=n):n=e[1];const{data:s,setData:r,post:h,processing:o,errors:c,reset:p}=Se(n);let f;e[2]!==a||e[3]!==h||e[4]!==p?(f=u=>{u.preventDefault(),h("/payments",{onSuccess:()=>{a(!1),p(),ye.success("Payment recorded successfully")},onError:tt})},e[2]=a,e[3]=h,e[4]=p,e[5]=f):f=e[5];const x=f;let v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsxs(Ce,{children:[t.jsx(Ne,{children:"Record Payment"}),t.jsx(Pe,{children:"Record a manual payment for a subscription"})]}),e[6]=v):v=e[6];let O;e[7]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(I,{htmlFor:"subscription_id",children:"Subscription *"}),e[7]=O):O=e[7];let A;e[8]!==r?(A=u=>r("subscription_id",u),e[8]=r,e[9]=A):A=e[9];let L;e[10]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(ce,{children:t.jsx(me,{placeholder:"Select subscription"})}),e[10]=L):L=e[10];let H;e[11]!==l?(H=l?.map(et),e[11]=l,e[12]=H):H=e[12];let S;e[13]!==H?(S=t.jsx(de,{children:H}),e[13]=H,e[14]=S):S=e[14];let C;e[15]!==s.subscription_id||e[16]!==A||e[17]!==S?(C=t.jsxs(oe,{value:s.subscription_id,onValueChange:A,children:[L,S]}),e[15]=s.subscription_id,e[16]=A,e[17]=S,e[18]=C):C=e[18];let N;e[19]!==c.subscription_id?(N=c.subscription_id&&t.jsx("p",{className:"text-sm text-destructive",children:c.subscription_id}),e[19]=c.subscription_id,e[20]=N):N=e[20];let E;e[21]!==C||e[22]!==N?(E=t.jsxs("div",{className:"space-y-2 col-span-2",children:[O,C,N]}),e[21]=C,e[22]=N,e[23]=E):E=e[23];let R;e[24]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(I,{htmlFor:"amount",children:"Amount *"}),e[24]=R):R=e[24];let V;e[25]!==r?(V=u=>r("amount",u.target.value),e[25]=r,e[26]=V):V=e[26];let P;e[27]!==s.amount||e[28]!==V?(P=t.jsx(je,{id:"amount",type:"number",step:"0.01",value:s.amount,onChange:V,placeholder:"0.00"}),e[27]=s.amount,e[28]=V,e[29]=P):P=e[29];let y;e[30]!==c.amount?(y=c.amount&&t.jsx("p",{className:"text-sm text-destructive",children:c.amount}),e[30]=c.amount,e[31]=y):y=e[31];let D;e[32]!==P||e[33]!==y?(D=t.jsxs("div",{className:"space-y-2",children:[R,P,y]}),e[32]=P,e[33]=y,e[34]=D):D=e[34];let k;e[35]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(I,{htmlFor:"payment_date",children:"Payment Date *"}),e[35]=k):k=e[35];let j;e[36]!==r?(j=u=>r("payment_date",u.target.value),e[36]=r,e[37]=j):j=e[37];let w;e[38]!==s.payment_date||e[39]!==j?(w=t.jsxs("div",{className:"space-y-2",children:[k,t.jsx(je,{id:"payment_date",type:"date",value:s.payment_date,onChange:j})]}),e[38]=s.payment_date,e[39]=j,e[40]=w):w=e[40];let F;e[41]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(I,{htmlFor:"payment_method",children:"Payment Method *"}),e[41]=F):F=e[41];let $;e[42]!==r?($=u=>r("payment_method",u),e[42]=r,e[43]=$):$=e[43];let m;e[44]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(ce,{children:t.jsx(me,{})}),e[44]=m):m=e[44];let T;e[45]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs(de,{children:[t.jsx(d,{value:"cash",children:"Cash"}),t.jsx(d,{value:"card",children:"Card"}),t.jsx(d,{value:"upi",children:"UPI"}),t.jsx(d,{value:"bank_transfer",children:"Bank Transfer"})]}),e[45]=T):T=e[45];let M;e[46]!==s.payment_method||e[47]!==$?(M=t.jsxs("div",{className:"space-y-2",children:[F,t.jsxs(oe,{value:s.payment_method,onValueChange:$,children:[m,T]})]}),e[46]=s.payment_method,e[47]=$,e[48]=M):M=e[48];let B;e[49]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(I,{htmlFor:"payment_type",children:"Payment Type *"}),e[49]=B):B=e[49];let Q;e[50]!==r?(Q=u=>r("payment_type",u),e[50]=r,e[51]=Q):Q=e[51];let ae;e[52]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(ce,{children:t.jsx(me,{})}),e[52]=ae):ae=e[52];let W;e[53]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsxs(de,{children:[t.jsx(d,{value:"plan",children:"Plan Fee"}),t.jsx(d,{value:"admission",children:"Admission Fee"}),t.jsx(d,{value:"renewal",children:"Renewal"})]}),e[53]=W):W=e[53];let X;e[54]!==s.payment_type||e[55]!==Q?(X=t.jsxs("div",{className:"space-y-2",children:[B,t.jsxs(oe,{value:s.payment_type,onValueChange:Q,children:[ae,W]})]}),e[54]=s.payment_type,e[55]=Q,e[56]=X):X=e[56];let Y;e[57]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(I,{htmlFor:"status",children:"Status *"}),e[57]=Y):Y=e[57];let z;e[58]!==r?(z=u=>r("status",u),e[58]=r,e[59]=z):z=e[59];let ie;e[60]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(ce,{children:t.jsx(me,{})}),e[60]=ie):ie=e[60];let Z;e[61]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsxs(de,{children:[t.jsx(d,{value:"completed",children:"Completed"}),t.jsx(d,{value:"pending",children:"Pending"}),t.jsx(d,{value:"failed",children:"Failed"})]}),e[61]=Z):Z=e[61];let ee;e[62]!==s.status||e[63]!==z?(ee=t.jsxs("div",{className:"space-y-2",children:[Y,t.jsxs(oe,{value:s.status,onValueChange:z,children:[ie,Z]})]}),e[62]=s.status,e[63]=z,e[64]=ee):ee=e[64];let re;e[65]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(I,{htmlFor:"notes",children:"Notes"}),e[65]=re):re=e[65];let U;e[66]!==r?(U=u=>r("notes",u.target.value),e[66]=r,e[67]=U):U=e[67];let te;e[68]!==s.notes||e[69]!==U?(te=t.jsxs("div",{className:"space-y-2 col-span-2",children:[re,t.jsx(Te,{id:"notes",value:s.notes,onChange:U,placeholder:"Optional notes..."})]}),e[68]=s.notes,e[69]=U,e[70]=te):te=e[70];let q;e[71]!==E||e[72]!==D||e[73]!==w||e[74]!==M||e[75]!==X||e[76]!==ee||e[77]!==te?(q=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[E,D,w,M,X,ee,te]}),e[71]=E,e[72]=D,e[73]=w,e[74]=M,e[75]=X,e[76]=ee,e[77]=te,e[78]=q):q=e[78];let G;e[79]!==a?(G=t.jsx(ne,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e[79]=a,e[80]=G):G=e[80];let se;e[81]!==o?(se=t.jsx(ne,{type:"submit",disabled:o,children:"Record Payment"}),e[81]=o,e[82]=se):se=e[82];let J;e[83]!==G||e[84]!==se?(J=t.jsxs(De,{children:[G,se]}),e[83]=G,e[84]=se,e[85]=J):J=e[85];let K;e[86]!==x||e[87]!==q||e[88]!==J?(K=t.jsxs(ke,{className:"max-w-2xl",children:[v,t.jsxs("form",{onSubmit:x,children:[q,J]})]}),e[86]=x,e[87]=q,e[88]=J,e[89]=K):K=e[89];let le;return e[90]!==a||e[91]!==i||e[92]!==K?(le=t.jsx(we,{open:i,onOpenChange:a,children:K}),e[90]=a,e[91]=i,e[92]=K,e[93]=le):le=e[93],le}function et(b){return t.jsxs(d,{value:b.id.toString(),children:[b.member?.name," - ",b.plan?.name]},b.id)}function tt(){ye.error("Failed to record payment")}function st(b){const e=_e.c(105),{open:i,onOpenChange:a,payment:l}=b;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={member_id:"none",subscription_id:"none",amount:"",payment_method:"cash",payment_type:"subscription",payment_date:new Date().toISOString().split("T")[0],status:"completed",notes:"",transaction_id:""},e[0]=g):g=e[0];const{data:n,setData:s,put:r,processing:h}=Se(g);let o;e[1]!==i||e[2]!==l||e[3]!==s?(o=()=>{l&&i&&s({member_id:l.member_id?.toString()||"none",subscription_id:l.subscription_id?.toString()||"none",amount:l.amount||"",payment_method:l.payment_method||"cash",payment_type:l.payment_type||"subscription",payment_date:l.payment_date?l.payment_date.split("T")[0]:new Date().toISOString().split("T")[0],status:l.status||"completed",notes:l.notes||"",transaction_id:l.transaction_id||""})},e[1]=i,e[2]=l,e[3]=s,e[4]=o):o=e[4];let c;e[5]!==i||e[6]!==l?(c=[l,i],e[5]=i,e[6]=l,e[7]=c):c=e[7],ge.useEffect(o,c);let p;e[8]!==a||e[9]!==l.id||e[10]!==r?(p=_=>{_.preventDefault(),r(`/payments/${l.id}`,{onSuccess:()=>{a(!1),ye.success("Payment updated successfully")},onError:lt})},e[8]=a,e[9]=l.id,e[10]=r,e[11]=p):p=e[11];const f=p;let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs(Ce,{children:[t.jsx(Ne,{children:"Edit Payment"}),t.jsx(Pe,{children:"Update payment information"})]}),e[12]=x):x=e[12];let v;e[13]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(I,{htmlFor:"member_id",children:"Member"}),e[13]=v):v=e[13];let O;e[14]!==s?(O=_=>s("member_id",_),e[14]=s,e[15]=O):O=e[15];let A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(ce,{children:t.jsx(me,{})}),e[16]=A):A=e[16];const L=n.member_id==="none"?"none":n.member_id,H=l.member?.name||"Select Member";let S;e[17]!==H||e[18]!==L?(S=t.jsx(de,{children:t.jsx(d,{value:L,children:H})}),e[17]=H,e[18]=L,e[19]=S):S=e[19];let C;e[20]!==n.member_id||e[21]!==S||e[22]!==O?(C=t.jsxs("div",{className:"space-y-2",children:[v,t.jsxs(oe,{value:n.member_id,onValueChange:O,children:[A,S]})]}),e[20]=n.member_id,e[21]=S,e[22]=O,e[23]=C):C=e[23];let N;e[24]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(I,{htmlFor:"subscription_id",children:"Subscription (Optional)"}),e[24]=N):N=e[24];const E=n.subscription_id||"none";let R;e[25]!==s?(R=_=>s("subscription_id",_==="none"?"":_),e[25]=s,e[26]=R):R=e[26];let V;e[27]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx(ce,{children:t.jsx(me,{})}),e[27]=V):V=e[27];let P;e[28]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(de,{children:t.jsx(d,{value:"none",children:"None"})}),e[28]=P):P=e[28];let y;e[29]!==E||e[30]!==R?(y=t.jsxs("div",{className:"space-y-2",children:[N,t.jsxs(oe,{value:E,onValueChange:R,children:[V,P]})]}),e[29]=E,e[30]=R,e[31]=y):y=e[31];let D;e[32]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(I,{htmlFor:"amount",children:"Amount"}),e[32]=D):D=e[32];let k;e[33]!==s?(k=_=>s("amount",_.target.value),e[33]=s,e[34]=k):k=e[34];let j;e[35]!==n.amount||e[36]!==k?(j=t.jsxs("div",{className:"space-y-2",children:[D,t.jsx(je,{id:"amount",type:"number",value:n.amount,onChange:k})]}),e[35]=n.amount,e[36]=k,e[37]=j):j=e[37];let w;e[38]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(I,{htmlFor:"payment_method",children:"Payment Method"}),e[38]=w):w=e[38];let F;e[39]!==s?(F=_=>s("payment_method",_),e[39]=s,e[40]=F):F=e[40];let $;e[41]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ce,{children:t.jsx(me,{placeholder:"Select payment method"})}),e[41]=$):$=e[41];let m;e[42]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs(de,{children:[t.jsx(d,{value:"cash",children:"Cash"}),t.jsx(d,{value:"card",children:"Card"}),t.jsx(d,{value:"upi",children:"UPI"}),t.jsx(d,{value:"bank_transfer",children:"Bank Transfer"}),t.jsx(d,{value:"phonepe",children:"PhonePe"})]}),e[42]=m):m=e[42];let T;e[43]!==n.payment_method||e[44]!==F?(T=t.jsxs("div",{className:"space-y-2",children:[w,t.jsxs(oe,{value:n.payment_method,onValueChange:F,children:[$,m]})]}),e[43]=n.payment_method,e[44]=F,e[45]=T):T=e[45];let M;e[46]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(I,{htmlFor:"payment_type",children:"Payment Type"}),e[46]=M):M=e[46];let B;e[47]!==s?(B=_=>s("payment_type",_),e[47]=s,e[48]=B):B=e[48];let Q;e[49]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(ce,{children:t.jsx(me,{placeholder:"Select payment type"})}),e[49]=Q):Q=e[49];let ae;e[50]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(de,{children:[t.jsx(d,{value:"plan",children:"Plan"}),t.jsx(d,{value:"admission",children:"Admission"}),t.jsx(d,{value:"renewal",children:"Renewal"})]}),e[50]=ae):ae=e[50];let W;e[51]!==n.payment_type||e[52]!==B?(W=t.jsxs("div",{className:"space-y-2",children:[M,t.jsxs(oe,{value:n.payment_type,onValueChange:B,children:[Q,ae]})]}),e[51]=n.payment_type,e[52]=B,e[53]=W):W=e[53];let X;e[54]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(I,{htmlFor:"payment_date",children:"Payment Date"}),e[54]=X):X=e[54];let Y;e[55]!==s?(Y=_=>s("payment_date",_.target.value),e[55]=s,e[56]=Y):Y=e[56];let z;e[57]!==n.payment_date||e[58]!==Y?(z=t.jsxs("div",{className:"space-y-2",children:[X,t.jsx(je,{id:"payment_date",type:"date",value:n.payment_date,onChange:Y})]}),e[57]=n.payment_date,e[58]=Y,e[59]=z):z=e[59];let ie;e[60]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(I,{htmlFor:"status",children:"Status"}),e[60]=ie):ie=e[60];let Z;e[61]!==s?(Z=_=>s("status",_),e[61]=s,e[62]=Z):Z=e[62];let ee;e[63]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(ce,{children:t.jsx(me,{})}),e[63]=ee):ee=e[63];let re;e[64]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsxs(de,{children:[t.jsx(d,{value:"completed",children:"Completed"}),t.jsx(d,{value:"pending",children:"Pending"}),t.jsx(d,{value:"failed",children:"Failed"}),t.jsx(d,{value:"refunded",children:"Refunded"})]}),e[64]=re):re=e[64];let U;e[65]!==n.status||e[66]!==Z?(U=t.jsxs("div",{className:"space-y-2",children:[ie,t.jsxs(oe,{value:n.status,onValueChange:Z,children:[ee,re]})]}),e[65]=n.status,e[66]=Z,e[67]=U):U=e[67];let te;e[68]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(I,{htmlFor:"transaction_id",children:"Transaction ID"}),e[68]=te):te=e[68];let q;e[69]!==s?(q=_=>s("transaction_id",_.target.value),e[69]=s,e[70]=q):q=e[70];let G;e[71]!==n.transaction_id||e[72]!==q?(G=t.jsxs("div",{className:"space-y-2",children:[te,t.jsx(je,{id:"transaction_id",value:n.transaction_id,onChange:q})]}),e[71]=n.transaction_id,e[72]=q,e[73]=G):G=e[73];let se;e[74]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(I,{htmlFor:"notes",children:"Notes"}),e[74]=se):se=e[74];let J;e[75]!==s?(J=_=>s("notes",_.target.value),e[75]=s,e[76]=J):J=e[76];let K;e[77]!==n.notes||e[78]!==J?(K=t.jsxs("div",{className:"space-y-2 col-span-2",children:[se,t.jsx(Te,{id:"notes",value:n.notes,onChange:J})]}),e[77]=n.notes,e[78]=J,e[79]=K):K=e[79];let le;e[80]!==C||e[81]!==y||e[82]!==j||e[83]!==T||e[84]!==W||e[85]!==z||e[86]!==U||e[87]!==G||e[88]!==K?(le=t.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[C,y,j,T,W,z,U,G,K]}),e[80]=C,e[81]=y,e[82]=j,e[83]=T,e[84]=W,e[85]=z,e[86]=U,e[87]=G,e[88]=K,e[89]=le):le=e[89];let u;e[90]!==a?(u=t.jsx(ne,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e[90]=a,e[91]=u):u=e[91];let ue;e[92]!==h?(ue=t.jsx(ne,{type:"submit",disabled:h,children:"Update"}),e[92]=h,e[93]=ue):ue=e[93];let fe;e[94]!==u||e[95]!==ue?(fe=t.jsxs(De,{children:[u,ue]}),e[94]=u,e[95]=ue,e[96]=fe):fe=e[96];let xe;e[97]!==f||e[98]!==le||e[99]!==fe?(xe=t.jsxs(ke,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[x,t.jsxs("form",{onSubmit:f,children:[le,fe]})]}),e[97]=f,e[98]=le,e[99]=fe,e[100]=xe):xe=e[100];let be;return e[101]!==a||e[102]!==i||e[103]!==xe?(be=t.jsx(we,{open:i,onOpenChange:a,children:xe}),e[101]=a,e[102]=i,e[103]=xe,e[104]=be):be=e[104],be}function lt(){ye.error("Failed to update payment")}function nt(b){const e=_e.c(22),{open:i,onOpenChange:a,payment:l}=b,{delete:g,processing:n}=Se();let s;e[0]!==g||e[1]!==a||e[2]!==l.id?(s=()=>{g(`/payments/${l.id}`,{onSuccess:()=>{a(!1),ye.success("Payment deleted successfully")},onError:at})},e[0]=g,e[1]=a,e[2]=l.id,e[3]=s):s=e[3];const r=s;let h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Ne,{children:"Delete Payment"}),e[4]=h):h=e[4];let o;e[5]!==l.invoice_number?(o=t.jsxs(Ce,{children:[h,t.jsxs(Pe,{children:['Are you sure you want to delete payment "',l.invoice_number,'"? This action cannot be undone.']})]}),e[5]=l.invoice_number,e[6]=o):o=e[6];let c;e[7]!==a?(c=t.jsx(ne,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e[7]=a,e[8]=c):c=e[8];let p;e[9]!==r||e[10]!==n?(p=t.jsx(ne,{variant:"destructive",onClick:r,disabled:n,children:"Delete"}),e[9]=r,e[10]=n,e[11]=p):p=e[11];let f;e[12]!==c||e[13]!==p?(f=t.jsxs(De,{children:[c,p]}),e[12]=c,e[13]=p,e[14]=f):f=e[14];let x;e[15]!==o||e[16]!==f?(x=t.jsxs(ke,{children:[o,f]}),e[15]=o,e[16]=f,e[17]=x):x=e[17];let v;return e[18]!==a||e[19]!==i||e[20]!==x?(v=t.jsx(we,{open:i,onOpenChange:a,children:x}),e[18]=a,e[19]=i,e[20]=x,e[21]=v):v=e[21],v}function at(){ye.error("Failed to delete payment")}function Tt(b){const e=_e.c(43),{payments:i,subscriptions:a}=b,{auth:l}=Ee().props,[g,n]=ge.useState(!1),[s,r]=ge.useState(null),[h,o]=ge.useState(null);let c;e[0]!==l.permissions?(c=l.permissions.includes("create_payments"),e[0]=l.permissions,e[1]=c):c=e[1];const p=c;let f;e[2]!==l.permissions?(f=l.permissions.includes("edit_payments"),e[2]=l.permissions,e[3]=f):f=e[3];const x=f;let v;e[4]!==l.permissions?(v=l.permissions.includes("delete_payments"),e[4]=l.permissions,e[5]=v):v=e[5];const O=v,A=rt;let L;e[6]!==i?(L=()=>{const m=[],{current_page:T,last_page:M}=i;if(M<=7)return Array.from({length:M},it);m.push(1),T>3&&m.push("...");for(let B=Math.max(2,T-1);B<=Math.min(M-1,T+1);B++)m.push(B);return T<M-2&&m.push("..."),m.push(M),m},e[6]=i,e[7]=L):L=e[7];const H=L;let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(Me,{title:"Payments"}),e[8]=S):S=e[8];let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Payments"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage payment records"})]}),e[9]=C):C=e[9];let N;e[10]!==p?(N=p&&t.jsx(ne,{onClick:()=>n(!0),children:"Record Payment"}),e[10]=p,e[11]=N):N=e[11];let E;e[12]!==N?(E=t.jsxs("div",{className:"flex items-center justify-between",children:[C,N]}),e[12]=N,e[13]=E):E=e[13];const R=x?r:void 0,V=O?o:void 0;let P;e[14]!==i.data||e[15]!==V||e[16]!==R?(P=t.jsx(Xe,{payments:i.data,onEdit:R,onDelete:V}),e[14]=i.data,e[15]=V,e[16]=R,e[17]=P):P=e[17];let y;e[18]!==H||e[19]!==i.current_page||e[20]!==i.last_page?(y=i.last_page>1&&t.jsx("div",{className:"p-4",children:t.jsx(Re,{children:t.jsxs(Ve,{children:[t.jsx(ve,{children:t.jsx(Be,{onClick:()=>A(i.current_page-1),className:i.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),H().map((m,T)=>t.jsx(ve,{children:m==="..."?t.jsx(He,{}):t.jsx(Le,{onClick:()=>A(m),isActive:m===i.current_page,className:"cursor-pointer",children:m})},T)),t.jsx(ve,{children:t.jsx(ze,{onClick:()=>A(i.current_page+1),className:i.current_page===i.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})}),e[18]=H,e[19]=i.current_page,e[20]=i.last_page,e[21]=y):y=e[21];let D;e[22]!==P||e[23]!==y?(D=t.jsx(Ie,{children:t.jsxs(Ae,{className:"p-6",children:[P,y]})}),e[22]=P,e[23]=y,e[24]=D):D=e[24];let k;e[25]!==D||e[26]!==E?(k=t.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[E,D]}),e[25]=D,e[26]=E,e[27]=k):k=e[27];let j;e[28]!==p||e[29]!==g||e[30]!==a?(j=p&&t.jsx(Ze,{open:g,onOpenChange:n,subscriptions:a||[]}),e[28]=p,e[29]=g,e[30]=a,e[31]=j):j=e[31];let w;e[32]!==x||e[33]!==s?(w=x&&s&&t.jsx(st,{open:!!s,onOpenChange:m=>!m&&r(null),payment:s}),e[32]=x,e[33]=s,e[34]=w):w=e[34];let F;e[35]!==O||e[36]!==h?(F=O&&h&&t.jsx(nt,{open:!!h,onOpenChange:m=>!m&&o(null),payment:h}),e[35]=O,e[36]=h,e[37]=F):F=e[37];let $;return e[38]!==k||e[39]!==j||e[40]!==w||e[41]!==F?($=t.jsxs($e,{children:[S,k,j,w,F]}),e[38]=k,e[39]=j,e[40]=w,e[41]=F,e[42]=$):$=e[42],$}function it(b,e){return e+1}function rt(b){Oe.get("/payments",{page:b},{preserveState:!0})}export{Tt as default};
